<!DOCTYPE html>
<html lang="es"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
  <title>Mujer Saludable</title> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
  <style>
    /* Variables de color para el tema claro (original) */
    :root {
      --color-primary: #e91e63;
      --color-primary-light: #f48fb1;
      --color-primary-dark: #c2185b;
      --color-accent: #8e24aa;
      --color-text: #333;
      --color-text-light: #666;
      --color-bg: #fefefe;
      --color-bg-card: #fff;
      --color-border: #eaeaea;
    }

    /* Estilos generales (aplican a ambos temas) */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: var(--color-bg);
      color: var(--color-text);
      padding-bottom: 70px; /* Espacio para la barra de navegaci√≥n inferior */
      line-height: 1.6;
      transition: background 0.3s, color 0.3s;
    }

    header {
      background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
      color: white;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      text-align: center;
      position: relative;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 5px;
      cursor: pointer;
    }

    .nombre-usuario {
      font-size: 16px;
      opacity: 0.9;
    }

    .seccion {
      display: none;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }

    .seccion.activa {
      display: block;
      animation: fadeIn 0.4s ease-in;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(20px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .card {
      background: var(--color-bg-card);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid var(--color-border);
      transition: background 0.3s, border 0.3s, box-shadow 0.3s;
    }

    .nav-inferior {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: white;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 999;
      border-top: 1px solid var(--color-border);
      transition: background 0.3s, border-color 0.3s;
    }

    .nav-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 20%;
      height: 100%;
      color: #aaa;
      text-decoration: none;
      font-size: 10px;
      transition: 0.3s;
    }

    .nav-btn i {
      font-size: 20px;
      margin-bottom: 2px;
      transition: 0.3s;
    }

    .nav-btn.activo {
      color: var(--color-primary);
    }

    .nav-btn.activo i {
      transform: scale(1.2);
    }

    h2 {
      margin-bottom: 15px;
      color: var(--color-primary);
      font-size: 22px;
    }

    h3 {
      margin-bottom: 10px;
      color: var(--color-primary-dark);
      font-size: 18px;
    }

    p {
      margin-bottom: 15px;
      color: var(--color-text-light);
    }

    .quote {
      font-style: italic;
      border-left: 3px solid var(--color-primary-light);
      padding-left: 15px;
    }

    canvas {
      width: 100%;
      max-width: 100%;
      height: 180px;
      margin: 15px 0;
      background: #fafafa;
      border: 1px solid var(--color-border);
      border-radius: 8px;
    }

    button {
      background: var(--color-primary);
      color: white;
      border: none;
      padding: 12px 20px;
      margin-top: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
      width: 100%;
    }

    button:hover {
      background: var(--color-primary-dark);
    }

    button.outline {
      background: transparent;
      border: 1px solid var(--color-primary);
      color: var(--color-primary);
    }

    button.outline:hover {
      background: rgba(233, 30, 99, 0.1);
    }

    button.danger {
      background: #f44336;
    }

    button.danger:hover {
      background: #d32f2f;
    }

    .btn-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 12px;
      margin: 8px 0 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      transition: border 0.3s;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--color-primary);
      outline: none;
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: 500;
      color: var(--color-text);
    }

    .form-group {
      margin-bottom: 15px;
    }

    small {
      display: block;
      margin-top: 20px;
      color: #888;
      text-align: center;
    }

    .estado-animo {
      display: flex;
      justify-content: space-between;
      margin: 15px 0;
    }

    .estado-btn {
      background: #f0f0f0;
      border: 2px solid transparent;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.3s;
      font-size: 20px;
    }

    .estado-btn.seleccionado {
      border-color: var(--color-primary);
      background: rgba(233, 30, 99, 0.1);
    }

    .progreso-container {
      background: #f0f0f0;
      border-radius: 8px;
      height: 20px;
      margin: 15px 0;
      overflow: hidden;
    }

    .progreso-barra {
      height: 100%;
      background: linear-gradient(90deg, var(--color-primary-light), var(--color-primary));
      transition: width 0.3s;
    }

    .fases-ciclo {
      display: flex;
      margin: 15px 0;
    }

    .fase {
      flex: 1;
      text-align: center;
      padding: 10px 0;
      font-size: 12px;
      position: relative;
    }

    .fase-1 {
      background: #f8bbd0;
    }

    .fase-2 {
      background: #e1bee7;
    }

    .fase-3 {
      background: #bbdefb;
    }

    .fase-4 {
      background: #c8e6c9;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 15px 0;
    }

    .stat-box {
      border: 1px solid var(--color-border);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .stat-box h4 {
      font-size: 12px;
      color: var(--color-text-light);
      margin-bottom: 5px;
    }

    .stat-box p {
      font-size: 20px;
      font-weight: bold;
      color: var(--color-primary);
      margin: 0;
    }

    .sintomas-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 8px;
      margin: 15px 0;
    }

    .sintoma-tag {
      padding: 8px;
      background: #f0f0f0;
      border-radius: 6px;
      font-size: 12px;
      text-align: center;
      cursor: pointer;
      transition: 0.3s;
    }

    .sintoma-tag.activo {
      background: var(--color-primary-light);
      color: white;
    }

    .tabs {
      display: flex;
      margin-bottom: 15px;
      border-bottom: 1px solid var(--color-border);
    }

    .tab {
      padding: 10px 15px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }

    .tab.activo {
      border-bottom-color: var(--color-primary);
      color: var(--color-primary);
      font-weight: 500;
    }

    .tab-content {
      display: none;
    }

    .tab-content.activo {
      display: block;
    }

    .recordatorio {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 3px solid var(--color-primary);
      position: relative;
    }

    .recordatorio-acciones {
      position: absolute;
      top: 10px;
      right: 10px;
    }

    .recordatorio-acciones i {
      cursor: pointer;
      color: #888;
      margin-left: 8px;
    }

    .avatar-container {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }

    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border: 3px solid white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .avatar i {
      font-size: 50px;
      color: #ccc;
    }

    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .foto-row {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }

    .foto-btn {
      flex: 1;
      text-align: center;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 8px;
      cursor: pointer;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
      margin-left: 10px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--color-primary);
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .config-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .loader {
      display: none;
      margin: 20px auto;
      border: 4px solid #f3f3f3;
      border-top: 4px solid var(--color-primary);
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .icon-text {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .icon-text i {
      color: var(--color-primary);
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      background: var(--color-primary-light);
      color: white;
      border-radius: 12px;
      font-size: 11px;
      margin-left: 5px;
    }

    .no-data {
      text-align: center;
      padding: 30px 0;
      color: #888;
    }

    .no-data i {
      font-size: 40px;
      margin-bottom: 10px;
      opacity: 0.4;
    }

    .mensaje-flotante {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      z-index: 1000;
      display: none;
    }

    /* Nuevos estilos para mejoras */
    .clima-widget {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 15px 0;
    }

    .clima-temp {
      font-size: 24px;
      font-weight: bold;
      color: var(--color-primary);
    }

    .clima-estado {
      font-size: 16px;
      color: var(--color-text-light);
    }

    .clima-consejo {
      font-size: 14px;
      color: var(--color-primary-dark);
      font-style: italic;
      padding: 10px;
      background-color: rgba(233, 30, 99, 0.1);
      border-radius: 8px;
    }

    .consejo-salud {
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin: 15px 0;
      border-left: 4px solid var(--color-primary);
    }

    .comunidad-card {
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background-color: #f8f9fa;
      border: 1px solid var(--color-border);
    }

    .comunidad-card h4 {
      color: var(--color-primary);
      margin-bottom: 10px;
    }

    .emergencia-btn {
      background: #f44336;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-weight: bold;
      text-align: center;
    }

    .recursos-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 15px 0;
    }

    .recurso-item {
      padding: 10px;
      border-radius: 8px;
      background-color: #f8f9fa;
      border: 1px solid var(--color-border);
      text-align: center;
    }

    .recurso-item i {
      font-size: 24px;
      color: var(--color-primary);
      margin-bottom: 5px;
    }

    /* Estilos para el modo oscuro */
    body.dark-mode {
      --color-text: #eee;
      --color-text-light: #ccc;
      --color-bg: #121212;
      --color-bg-card: #1e1e1e;
      --color-border: #333;
    }

    body.dark-mode .card {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border);
      box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
    }

    body.dark-mode .nav-inferior {
      background: #1e1e1e;
      border-top: 1px solid var(--color-border);
    }

    body.dark-mode .nav-btn {
      color: #aaa;
    }

    body.dark-mode .nav-btn.activo {
      color: var(--color-primary);
    }

    body.dark-mode input,
    body.dark-mode textarea,
    body.dark-mode select {
      background-color: #2a2a2a;
      border-color: #444;
      color: #eee;
    }

    body.dark-mode input:focus,
    body.dark-mode textarea:focus,
    body.dark-mode select:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 5px rgba(233, 30, 99, 0.5);
    }

    body.dark-mode h2 {
      color: var(--color-primary);
    }

    body.dark-mode h3 {
      color: var(--color-primary-dark);
    }

    body.dark-mode .estado-btn {
      background: #444;
      color: #eee;
    }

    body.dark-mode .estado-btn.seleccionado {
      border-color: var(--color-primary);
      background: rgba(233, 30, 99, 0.1);
      color: #eee;
    }

    body.dark-mode .progreso-container {
      background-color: #444;
    }

    body.dark-mode .tab {
      color: #aaa;
    }

    body.dark-mode .tab.activo {
      color: var(--color-primary);
    }

    body.dark-mode .sintoma-tag {
      background-color: #444;
      color: #eee;
    }

    body.dark-mode .sintoma-tag.activo {
      background-color: var(--color-primary-light);
      color: #fff;
    }

    body.dark-mode .consejo-salud,
    body.dark-mode .comunidad-card,
    body.dark-mode .recurso-item {
      background-color: #2a2a2a;
      border-color: #444;
    }

    /* Modo creador */
    body.modo-creador {
      --color-primary: #4a148c;
      --color-primary-light: #7b1fa2;
      --color-primary-dark: #12005e;
    }

    body.modo-creador .nav-inferior {
      background: linear-gradient(135deg, #4a148c, #7b1fa2);
    }

    body.modo-creador .nav-btn.activo {
      color: #fff;
      text-shadow: 0 0 5px rgba(255,255,255,0.5);
    }

    body.modo-creador.dark-mode {
      --color-primary: #9c27b0;
      --color-bg: #1a1a1a;
      --color-bg-card: #2a2a2a;
    }
    .seccion {
       overflow-y: auto;  /* Permite scroll vertical */
       height: calc(100vh - 130px); /* Ajusta la altura restando el header y el nav */
     }
  </style> 
 </head> 
 <body> 
  <header id="cabecera"> 
   <h1><i class="fa fa-heartbeat"></i> Mujer Saludable</h1> 
   <div class="nombre-usuario" id="headerNombre"> <i class="fa fa-user"></i> Bienvenida 
   </div> 
  </header> 
  <div id="mensaje-flotante" class="mensaje-flotante"></div> 
  <div id="inicio" class="seccion activa"> 
   <div class="card"> 
    <h2><i class="fa fa-star"></i> Bienvenida</h2> 
    <div id="saludoUsuaria"></div> 
    <div class="quote"> 
     <p id="fraseDelDia">"<i class="fa fa-quote-left"></i> Tu bienestar es tu mayor riqueza. <i class="fa fa-quote-right"></i>"</p> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-thermometer-half"></i> Estado de hoy</h3> 
    <p>¬øC√≥mo te sientes hoy?</p> 
    <div class="estado-animo"> 
     <div class="estado-btn" data-valor="1"> <i class="fa fa-frown"></i> 
     </div> 
     <div class="estado-btn" data-valor="2"> <i class="fa fa-meh"></i> 
     </div> 
     <div class="estado-btn" data-valor="3"> <i class="fa fa-smile"></i> 
     </div> 
     <div class="estado-btn" data-valor="4"> <i class="fa fa-laugh"></i> 
     </div> 
     <div class="estado-btn" data-valor="5"> <i class="fa fa-grin-beam"></i> 
     </div> 
    </div> <button id="guardarAnimo"><i class="fa fa-save"></i> Guardar estado</button> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-chart-pie"></i> Resumen</h3> 
    <div class="stats-grid"> 
     <div class="stat-box"> 
      <h4><i class="fa fa-calendar-alt"></i> Ciclo</h4> 
      <p id="resumeCiclo">-</p> 
     </div> 
     <div class="stat-box"> 
      <h4><i class="fa fa-heart"></i> Estado</h4> 
      <p id="resumeEstado">-</p> 
     </div> 
     <div class="stat-box"> 
      <h4><i class="fa fa-weight-hanging"></i> Peso</h4> 
      <p id="resumePeso">-</p> 
     </div> 
     <div class="stat-box"> 
      <h4><i class="fa fa-calculator"></i> IMC</h4> 
      <p id="resumeIMC">-</p> 
     </div> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-cloud-sun"></i> Clima y Salud</h3> 
    <div id="widgetClima"> 
     <div class="loader"></div> 
    </div> 
    <p class="clima-consejo" id="climaConsejo"></p> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-lightbulb"></i> Consejo del D√≠a</h3> 
    <div class="consejo-salud" id="consejoSalud"></div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-bell"></i> Recordatorios</h3> 
    <div id="recordatorios-container"> 
     <div class="no-data"> <i class="fa fa-bell-slash"></i> 
      <p>No tienes recordatorios</p> 
     </div> 
    </div> <button id="nuevoRecordatorio" class="outline"><i class="fa fa-plus"></i> Nuevo Recordatorio</button> 
   </div> 
  </div> 
  <div id="ciclo" class="seccion"> 
   <div class="card"> 
    <h2><i class="fa fa-calendar-week"></i> Ciclo Menstrual</h2> 
    <div class="form-group"> <label><i class="fa fa-calendar-day"></i> Fecha de inicio del √∫ltimo periodo:</label> 
     <input type="date" id="fechaCiclo"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-hourglass-half"></i> Duraci√≥n promedio de tu ciclo (d√≠as):</label> 
     <input type="number" id="duracionCiclo" min="21" max="40" value="28"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-hourglass-start"></i> Duraci√≥n promedio de tu periodo (d√≠as):</label> 
     <input type="number" id="duracionPeriodo" min="1" max="10" value="5"> 
    </div> <button onclick="guardarCiclo()"><i class="fa fa-save"></i> Guardar</button> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-line-chart"></i> Tu Ciclo</h3> 
    <div class="fases-ciclo"> 
     <div class="fase fase-1"> <i class="fa fa-tint"></i> Menstruaci√≥n 
     </div> 
     <div class="fase fase-2"> <i class="fa fa-leaf"></i> Folicular 
     </div> 
     <div class="fase fase-3"> <i class="fa fa-egg"></i> Ovulaci√≥n 
     </div> 
     <div class="fase fase-4"> <i class="fa fa-moon"></i> L√∫tea 
     </div> 
    </div> 
    <canvas id="graficoCiclo"></canvas> 
    <div id="proximosPeriodos"> <i class="fa fa-calendar-check"></i> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-exclamation-triangle"></i> S√≠ntomas</h3> 
    <div class="sintomas-grid"> 
     <div class="sintoma-tag" data-sintoma="dolor"> <i class="fa fa-medkit"></i> Dolor 
     </div> 
     <div class="sintoma-tag" data-sintoma="inflamacion"> <i class="fa fa-burn"></i> Inflamaci√≥n 
     </div> 
     <div class="sintoma-tag" data-sintoma="cansancio"> <i class="fa fa-bed"></i> Cansancio 
     </div> 
     <div class="sintoma-tag" data-sintoma="antojos"> <i class="fa fa-utensils"></i> Antojos 
     </div> 
     <div class="sintoma-tag" data-sintoma="acne"> <i class="fa fa-circle"></i> Acn√© 
     </div> 
     <div class="sintoma-tag" data-sintoma="dolorcabeza"> <i class="fa fa-head-side-cough"></i> Dolor cabeza 
     </div> 
     <div class="sintoma-tag" data-sintoma="mareos"> <i class="fa fa-dizzy"></i> Mareos 
     </div> 
     <div class="sintoma-tag" data-sintoma="cambiosanimo"> <i class="fa fa-face-grin-beam-sweat"></i> Cambios √°nimo 
     </div> 
     <div class="sintoma-tag" data-sintoma="otro"> <i class="fa fa-plus-circle"></i> Otro 
     </div> 
    </div> <textarea id="notasCiclo" rows="3" placeholder="Describe tus s√≠ntomas o notas"></textarea> <button onclick="guardarSintomasCiclo()"><i class="fa fa-save"></i> Guardar s√≠ntomas</button> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-calculator"></i> Calculadora de Fertilidad</h3> 
    <div class="form-group"> <label><i class="fa fa-calendar-day"></i> Primer d√≠a del √∫ltimo periodo:</label> 
     <input type="date" id="fertilidadFecha"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-hourglass-half"></i> Duraci√≥n promedio de tu ciclo:</label> 
     <input type="number" id="fertilidadDuracion" min="21" max="40" value="28"> 
    </div> <button onclick="calcularFertilidad()"><i class="fa fa-calculator"></i> Calcular d√≠as f√©rtiles</button> 
    <div id="resultadoFertilidad" style="margin-top: 15px;"></div> 
   </div> 
  </div> 
  <div id="embarazo" class="seccion"> 
   <div class="card"> 
    <h2><i class="fa fa-baby"></i> Embarazo</h2> 
    <div class="form-group"> <label><i class="fa fa-calendar-alt"></i> Fecha de √∫ltima menstruaci√≥n:</label> 
     <input type="date" id="fechaUltimoPeriodo"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-calendar-plus"></i> Fecha probable de parto (opcional):</label> 
     <input type="date" id="fechaProbableParto"> 
    </div> <button onclick="calcularEmbarazo()"><i class="fa fa-calculator"></i> Calcular</button> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-tasks"></i> Tu progreso</h3> 
    <div id="infoEmbarazo"></div> 
    <div class="progreso-container"> 
     <div class="progreso-barra" id="progresoEmbarazo"></div> 
    </div> 
    <canvas id="graficoEmbarazo"></canvas> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-notes-medical"></i> Seguimiento</h3> 
    <div class="tabs"> 
     <div class="tab activo" data-tab="peso"> <i class="fa fa-weight"></i> Peso 
     </div> 
     <div class="tab" data-tab="movimientos"> <i class="fa fa-heartbeat"></i> Movimientos 
     </div> 
     <div class="tab" data-tab="contracciones"> <i class="fa fa-heartbeat"></i> Contracciones 
     </div> 
    </div> 
    <div class="tab-content activo" id="tab-peso"> 
     <div class="form-group"> <label><i class="fa fa-weight-scale"></i> Peso actual (kg):</label> 
      <input type="number" step="0.1" id="pesoEmbarazo"> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-calendar-alt"></i> Fecha:</label> 
      <input type="date" id="fechaPesoEmbarazo"> 
     </div> <button onclick="guardarPesoEmbarazo()"><i class="fa fa-save"></i> Guardar peso</button> 
    </div> 
    <div class="tab-content" id="tab-movimientos"> 
     <div class="form-group"> <label><i class="fa fa-hand-point-up"></i> Intensidad de movimientos:</label> <select id="intensidadMovimientos"> <option value="suave">Suaves</option> <option value="moderado">Moderados</option> <option value="fuerte">Fuertes</option> </select> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-stopwatch"></i> Duraci√≥n (minutos):</label> 
      <input type="number" id="duracionMovimientos" min="1" max="60"> 
     </div> <button onclick="guardarMovimientos()"><i class="fa fa-save"></i> Guardar movimientos</button> 
    </div> 
    <div class="tab-content" id="tab-contracciones"> 
     <div class="form-group"> <label><i class="fa fa-hourglass-half"></i> Duraci√≥n (segundos):</label> 
      <input type="number" id="duracionContracciones" min="1" max="120"> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-clock"></i> Frecuencia (minutos entre contracciones):</label> 
      <input type="number" id="frecuenciaContracciones" min="1" max="60"> 
     </div> <button onclick="guardarContracciones()"><i class="fa fa-save"></i> Guardar contracciones</button> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-baby-carriage"></i> Preparaci√≥n para el Parto</h3> 
    <div class="form-group"> <label><i class="fa fa-hospital"></i> Hospital seleccionado:</label> 
     <input type="text" id="hospitalParto" placeholder="Nombre del hospital"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-user-md"></i> M√©dico/ginec√≥logo:</label> 
     <input type="text" id="medicoParto" placeholder="Nombre del m√©dico"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-phone"></i> Tel√©fono de emergencia:</label> 
     <input type="tel" id="telefonoEmergencia" placeholder="N√∫mero de contacto"> 
    </div> <button onclick="guardarPreparacionParto()"><i class="fa fa-save"></i> Guardar informaci√≥n</button> 
   </div> 
  </div> 
  <div id="salud" class="seccion"> 
   <div class="card"> 
    <h2><i class="fa fa-heartbeat"></i> Mi Salud</h2> 
    <div class="tabs"> 
     <div class="tab activo" data-tab="metricas"> <i class="fa fa-tachometer-alt"></i> M√©tricas 
     </div> 
     <div class="tab" data-tab="diario"> <i class="fa fa-book-medical"></i> Diario 
     </div> 
     <div class="tab" data-tab="medicamentos"> <i class="fa fa-pills"></i> Medicamentos 
     </div> 
    </div> 
    <div class="tab-content activo" id="tab-metricas"> 
     <div class="form-group"> <label><i class="fa fa-weight"></i> Peso (kg):</label> 
      <input type="number" step="0.1" id="peso"> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-ruler-vertical"></i> Altura (cm):</label> 
      <input type="number" id="altura"> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-heartbeat"></i> Presi√≥n arterial (sist√≥lica/diast√≥lica):</label> 
      <div style="display: flex; gap: 10px;"> 
       <input type="number" id="presionSistolica" placeholder="120"> 
       <input type="number" id="presionDiastolica" placeholder="80"> 
      </div> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-pulse"></i> Ritmo card√≠aco (ppm):</label> 
      <input type="number" id="ritmoCardiaco"> 
     </div> <button onclick="guardarMetricas()"><i class="fa fa-save"></i> Guardar m√©tricas</button> 
    </div> 
    <div class="tab-content" id="tab-diario"> 
     <div class="form-group"> <label><i class="fa fa-comment-dots"></i> ¬øC√≥mo te sientes hoy?</label> <textarea id="notasSalud" rows="4" placeholder="Dolor, estado de √°nimo, s√≠ntomas, etc."></textarea> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-calendar-alt"></i> Fecha:</label> 
      <input type="date" id="fechaNotas"> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-camera"></i> Adjuntar foto (opcional):</label> 
      <input type="file" id="fotoDiario" accept="image/*"> 
     </div> <button onclick="guardarSalud()"><i class="fa fa-save"></i> Guardar en diario</button> 
    </div> 
    <div class="tab-content" id="tab-medicamentos"> 
     <div class="form-group"> <label><i class="fa fa-capsules"></i> Nombre del medicamento:</label> 
      <input type="text" id="nombreMedicamento" placeholder="Paracetamol, Ibuprofeno, etc."> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-prescription-bottle"></i> Dosis:</label> 
      <input type="text" id="dosisMedicamento" placeholder="500mg, 1 pastilla, etc."> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-clock"></i> Frecuencia:</label> <select id="frecuenciaMedicamento"> <option value="1">Una vez al d√≠a</option> <option value="2">Dos veces al d√≠a</option> <option value="3">Tres veces al d√≠a</option> <option value="4">Cuatro veces al d√≠a</option> <option value="segun">Seg√∫n necesidad</option> </select> 
     </div> 
     <div class="form-group"> <label><i class="fa fa-bell"></i> Recordatorio:</label> 
      <div class="config-item"> <span>Activar recordatorio</span> <label class="toggle-switch"> <input type="checkbox" id="recordatorioMedicamento"> <span class="slider"></span> </label> 
      </div> 
     </div> <button onclick="guardarMedicamento()"><i class="fa fa-save"></i> Guardar medicamento</button> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-history"></i> Historial</h3> 
    <canvas id="graficoSalud"></canvas> 
    <div id="historySalud" class="no-data"> <i class="fa fa-notes-medical"></i> 
     <p>No hay datos de salud registrados</p> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-notes-medical"></i> Historial M√©dico</h3> 
    <div class="form-group"> <label><i class="fa fa-calendar-alt"></i> Fecha del evento:</label> 
     <input type="date" id="fechaEventoMedico"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-file-medical"></i> Tipo de evento:</label> <select id="tipoEventoMedico"> <option value="consulta">Consulta m√©dica</option> <option value="analisis">An√°lisis/Examen</option> <option value="vacuna">Vacuna</option> <option value="cirugia">Cirug√≠a/Procedimiento</option> <option value="otro">Otro</option> </select> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-comment-medical"></i> Notas:</label> <textarea id="notasEventoMedico" rows="3" placeholder="Descripci√≥n del evento m√©dico"></textarea> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-file-pdf"></i> Documento adjunto (opcional):</label> 
     <input type="file" id="documentoEventoMedico" accept=".pdf,.jpg,.png"> 
    </div> <button onclick="guardarEventoMedico()"><i class="fa fa-save"></i> Guardar evento</button> 
   </div> 
  </div> 
  <div id="comunidad" class="seccion"> 
   <div class="card"> 
    <h2><i class="fa fa-users"></i> Comunidad</h2> 
    <p>Conecta con otras mujeres y comparte experiencias.</p> 
    <div class="comunidad-card"> 
     <h4><i class="fa fa-comments"></i> Foro de Discusi√≥n</h4> 
     <p>Participa en conversaciones sobre salud femenina.</p> <button class="outline" onclick="mostrarForo()"><i class="fa fa-sign-in-alt"></i> Entrar al foro</button> 
    </div> 
    <div class="comunidad-card"> 
     <h4><i class="fa fa-user-md"></i> Pregunta a un Especialista</h4> 
     <p>Haz preguntas an√≥nimas a nuestro equipo m√©dico.</p> <button class="outline" onclick="mostrarFormularioPregunta()"><i class="fa fa-question-circle"></i> Hacer pregunta</button> 
    </div> 
    <div class="comunidad-card"> 
     <h4><i class="fa fa-book"></i> Historias Inspiradoras</h4> 
     <p>Lee experiencias de otras mujeres y comparte la tuya.</p> <button class="outline" onclick="mostrarHistorias()"><i class="fa fa-book-open"></i> Ver historias</button> 
    </div> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-calendar-check"></i> Eventos Pr√≥ximos</h3> 
    <div id="eventosComunidad"> 
     <div class="no-data"> <i class="fa fa-calendar-times"></i> 
      <p>No hay eventos programados</p> 
     </div> 
    </div> <button class="outline" onclick="sugerirEvento()"><i class="fa fa-plus"></i> Sugerir evento</button> 
   </div> 
  </div> 
  <div id="recursos" class="seccion"> 
   <div class="card"> 
    <h2><i class="fa fa-book-open"></i> Recursos Educativos</h2> 
    <p>Encuentra informaci√≥n confiable sobre salud femenina.</p> 
    <div class="recursos-grid"> 
     <div class="recurso-item"> <i class="fa fa-file-alt"></i> 
      <h4>Art√≠culos</h4> 
      <p>Informaci√≥n basada en evidencia</p> 
     </div> 
     <div class="recurso-item"> <i class="fa fa-video"></i> 
      <h4>Videos</h4> 
      <p>Contenido educativo visual</p> 
     </div> 
     <div class="recurso-item"> <i class="fa fa-chart-pie"></i> 
      <h4>Infograf√≠as</h4> 
      <p>Datos en formato visual</p> 
     </div> 
     <div class="recurso-item"> <i class="fa fa-podcast"></i> 
      <h4>Podcasts</h4> 
      <p>Conversaciones sobre salud</p> 
     </div> 
    </div> <button class="outline" onclick="explorarRecursos()"><i class="fa fa-search"></i> Explorar todos los recursos</button> 
   </div> 
   <div class="card"> 
    <h3><i class="fa fa-heartbeat"></i> Emergencias</h3> 
    <p>En caso de emergencia, mant√©n la calma y act√∫a r√°pido.</p> 
    <div class="emergencia-btn" onclick="llamarEmergencia()"> <i class="fa fa-phone-alt"></i> <span>LLAMAR A EMERGENCIA</span> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-user-md"></i> Contacto de emergencia:</label> 
     <input type="text" id="contactoEmergencia1" placeholder="Nombre" value="911" disabled> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-phone"></i> Tel√©fono alternativo:</label> 
     <input type="tel" id="contactoEmergencia2" placeholder="N√∫mero de contacto"> 
    </div> <button onclick="guardarContactosEmergencia()"><i class="fa fa-save"></i> Guardar contactos</button> 
   </div> 
  </div> 
  <div id="perfil" class="seccion"> 
   <div class="card"> 
    <div class="avatar-container"> 
     <div class="avatar" id="avatarContainer"> <i class="fa fa-user"></i> 
     </div> 
    </div> 
    <div class="foto-row"> 
     <div class="foto-btn" id="cambiarFoto"> <i class="fa fa-camera"></i> 
      <div>
        Cambiar 
      </div> 
     </div> 
     <div class="foto-btn" id="quitarFoto"> <i class="fa fa-trash"></i> 
      <div>
        Quitar 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="card"> 
    <h2><i class="fa fa-id-card"></i> Datos Personales</h2> 
    <div class="form-group"> <label><i class="fa fa-signature"></i> Nombre:</label> 
     <input type="text" id="nombre" placeholder="Tu nombre"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-user-tag"></i> Apellidos:</label> 
     <input type="text" id="apellidos" placeholder="Tus apellidos"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-birthday-cake"></i> Fecha de nacimiento:</label> 
     <input type="date" id="fechaNacimiento"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-envelope"></i> Correo electr√≥nico:</label> 
     <input type="email" id="correo" placeholder="correo@ejemplo.com"> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-tint"></i> Grupo sangu√≠neo:</label> <select id="grupoSanguineo"> <option value="">Seleccionar</option> <option value="A+">A+</option> <option value="A-">A-</option> <option value="B+">B+</option> <option value="B-">B-</option> <option value="AB+">AB+</option> <option value="AB-">AB-</option> <option value="O+">O+</option> <option value="O-">O-</option> </select> 
    </div> <button onclick="guardarPerfil()"><i class="fa fa-save"></i> Guardar perfil</button> 
   </div> 
   <div class="card"> 
    <h2><i class="fa fa-file-medical-alt"></i> Informaci√≥n M√©dica</h2> 
    <div class="form-group"> <label><i class="fa fa-allergies"></i> Alergias:</label> <textarea id="alergias" rows="2" placeholder="Medicamentos, alimentos, etc."></textarea> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-heartbeat"></i> Condiciones m√©dicas:</label> <textarea id="condicionesMedicas" rows="2" placeholder="Diabetes, hipertensi√≥n, etc."></textarea> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-prescription-bottle"></i> Medicamentos habituales:</label> <textarea id="medicamentosHabituales" rows="2" placeholder="Incluyendo vitaminas y suplementos"></textarea> 
    </div> 
    <div class="form-group"> <label><i class="fa fa-user-friends"></i> Contacto de emergencia:</label> 
     <input type="text" id="contactoEmergenciaNombre" placeholder="Nombre"> 
     <input type="tel" id="contactoEmergenciaTelefono" placeholder="Tel√©fono"> 
    </div> <button onclick="guardarInfoMedica()"><i class="fa fa-save"></i> Guardar informaci√≥n m√©dica</button> 
   </div> 
   <div class="card"> 
    <h2><i class="fa fa-code"></i> Acerca de esta App</h2> 
    <div class="avatar-container"> 
     <div class="avatar"> <i class="fa fa-user-tie"></i> 
     </div> 
    </div> 
    <h3>Desarrollado por Andres Alvarez</h3> 
    <p>Esta aplicaci√≥n fue creada con el objetivo de empoderar a las mujeres en el cuidado de su salud.</p> 
    <div class="icon-text"> <i class="fab fa-github"></i> <span>Visita mi GitHub: <a href="https://github.com/AndresAlvarezmonvsyo?tab=repositories" target="_blank" id="githubLink"> github.com/AndresAlvarezmonvsyo </a> </span> 
    </div> 
    <div class="icon-text"> <i class="fa fa-envelope"></i> <span>Contacto: <a href="mailto:julianmoncayo69@gmail.com" id="emailLink"> julianmoncayo69@gmail.com </a> </span> 
    </div> <button onclick="mostrarAgradecimientos()" class="outline"> <i class="fa fa-heart"></i> Agradecimientos </button> 
   </div> 
   <div class="card"> 
    <h2><i class="fa fa-cogs"></i> Configuraci√≥n</h2> 
    <div class="form-group"> 
     <div class="config-item"> <span><i class="fa fa-bell"></i> Notificaciones</span> <label class="toggle-switch"> <input type="checkbox" id="configNotificaciones" checked> <span class="slider"></span> </label> 
     </div> 
     <div class="config-item"> <span><i class="fa fa-moon"></i> Modo oscuro</span> <label class="toggle-switch"> <input type="checkbox" id="configModoOscuro"> <span class="slider"></span> </label> 
     </div> 
     <div class="config-item"> <span><i class="fa fa-calendar-check"></i> Recordatorios de ciclo</span> <label class="toggle-switch"> <input type="checkbox" id="configRecordatoriosCiclo" checked> <span class="slider"></span> </label> 
     </div> 
     <div class="config-item"> <span><i class="fa fa-ruler-combined"></i> Unidades de medida</span> <select id="configUnidades"> <option value="metrico">M√©trico (kg, cm)</option> <option value="imperial">Imperial (lb, in)</option> </select> 
     </div> 
     <div class="config-item"> <span><i class="fa fa-globe"></i> Idioma</span> <select id="configIdioma"> <option value="es">Espa√±ol</option> <option value="en">English</option> <option value="fr">Fran√ßais</option> </select> 
     </div> 
    </div> <button onclick="guardarConfiguracion()"> <i class="fa fa-save"></i> Guardar configuraci√≥n </button> 
   </div> 
  <div class="card"> 
    <h2><i class="fa fa-database"></i> Gesti√≥n de datos</h2> 
    <p>Puedes exportar tus datos o eliminar toda la informaci√≥n guardada en la aplicaci√≥n.</p> 
    <div class="btn-group"> <button onclick="exportarDatos()" class="outline"><i class="fa fa-download"></i> Exportar datos</button> <button onclick="importarDatos()" class="outline"><i class="fa fa-upload"></i> Importar datos</button> 
    </div> <button onclick="resetDatos()" class="danger"><i class="fa fa-trash-alt"></i> Eliminar todos los datos</button> 
    <small id="version-info">App versi√≥n 3.0.0 - Desarrollado por Andres Alvarez</small>

<div id="version-modal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3><i class="fa fa-info-circle"></i> Informaci√≥n de la App</h3>
    <div class="modal-body">
      <p><strong>Versi√≥n:</strong> 3.0.0</p>
      <p><strong>Novedades:</strong></p>
      <ul>
        <li>‚ú® Nuevo asistente de IA con dise√±o femenino</li>
        <li>üé® Interfaz redise√±ada con colores pastel</li>
        <li>üí¨ Chat interactivo de salud y bienestar</li>
      </ul>
      <p><strong>Desarrollador:</strong> Andres Alvarez</p>
      <p><strong>Contacto:</strong> <a href="mailto:julianmoncayo69@gmail.com">julianmoncayo69@gmail.com</a></p>
    </div>
  </div>
</div>

<style>
  /* Estilos para el modal */
  .modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 192, 203, 0.8);
    backdrop-filter: blur(3px);
    animation: fadeIn 0.3s;
  }

  .modal-content {
    background-color: #fff9fb;
    margin: 10% auto;
    padding: 25px;
    border-radius: 15px;
    width: 80%;
    max-width: 400px;
    box-shadow: 0 5px 20px rgba(219, 112, 147, 0.3);
    border: 1px solid #ffcce6;
  }

  .modal-body {
    padding: 15px 0;
    color: #d6336c;
  }

  .modal-body ul {
    padding-left: 20px;
  }

  .modal-body li {
    margin-bottom: 8px;
  }

  .close-modal {
    color: #ff69b4;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
  }

  .close-modal:hover {
    color: #ff1493;
    transform: rotate(90deg);
  }

  #version-info {
    cursor: pointer;
    transition: all 0.3s;
    display: inline-block;
    margin-top: 15px;
    color: #ff69b4;
  }

  #version-info:hover {
    color: #ff1493;
    transform: scale(1.05);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>

<script>
  // Mostrar/ocultar modal
  document.getElementById('version-info').addEventListener('click', function() {
    document.getElementById('version-modal').style.display = 'block';
  });

  document.querySelector('.close-modal').addEventListener('click', function() {
    document.getElementById('version-modal').style.display = 'none';
  });

  // Cerrar modal al hacer clic fuera
  window.addEventListener('click', function(event) {
    if (event.target == document.getElementById('version-modal')) {
      document.getElementById('version-modal').style.display = 'none';
    }
  });
</script>

   </div> 
  </div> 


  <div class="nav-inferior"> <a class="nav-btn activo" data-target="inicio"> <i class="fa fa-home"></i> <span>Inicio</span> </a> <a class="nav-btn" data-target="ciclo"> <i class="fa fa-calendar"></i> <span>Ciclo</span> </a> <a class="nav-btn" data-target="embarazo"> <i class="fa fa-heartbeat"></i> <span>Embarazo</span> </a> <a class="nav-btn" data-target="salud"> <i class="fa fa-plus-square"></i> <span>Salud</span> </a> <a class="nav-btn" data-target="perfil"> <i class="fa fa-user"></i> <span>Perfil</span> </a> 
  </div> <!-- Agrega estas bibliotecas en el head de tu HTML --> <!-- Librer√≠a para exportar PDF --> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script> 
  <style>
  /* Modal personalizado para agradecimientos */
  .modal-agradecimientos {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: rgba(0,0,0,0.5);
    animation: fadeIn 0.5s;
  }

  .modal-contenido {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    border-radius: 12px;
    width: 80%;
    max-width: 450px;
    text-align: center;
    animation: slideDown 0.5s;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  .cerrar-modal {
    color: #888;
    float: right;
    font-size: 26px;
    font-weight: bold;
    cursor: pointer;
  }

  .cerrar-modal:hover {
    color: #000;
  }

  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }

  @keyframes slideDown {
    from {transform: translateY(-30px); opacity: 0;}
    to {transform: translateY(0); opacity: 1;}
  }
</style> <!-- Modal Agradecimientos --> 
  <div id="modalAgradecimientos" class="modal-agradecimientos"> 
   <div class="modal-contenido"> <span class="cerrar-modal" onclick="cerrarModal()">√ó</span> 
    <h2>Agradecimientos</h2> 
    <p>A todas las mujeres que inspiran este proyecto.</p> 
    <p>A los profesionales de la salud que brindan su conocimiento.</p> 
    <p>A la comunidad de desarrolladores que comparte su sabidur√≠a.</p> 
    <br><strong>- Andres Alvarez</strong> 
   </div> 
  </div> <!-- Bot√≥n IA flotante (Ayuda) --> <button id="botonIA"><i class="fa fa-question-circle"></i></button> <!-- Modal --> 
  <div id="modalIA"> 
   <div id="modalHeader"> <button id="abrirMenu"><i class="fa fa-bars"></i></button> Asistente de Salud <button id="cerrarModal"><i class="fa fa-times"></i></button> 
   </div> 
   <div id="menuConversaciones"> 
    <ul id="listaConversaciones"></ul> 
   </div> 
   <div id="chatbox"></div> 
   <div id="sugerenciasContainer"> 
    <p>¬øNecesitas ayuda con alg√∫n tema en particular?</p> 
    <div id="sugerenciasBotones"></div> 
   </div> 
   <div id="modalFooter"> 
    <input type="text" id="userInput" placeholder="Escribe algo..."> <button id="enviarBtn"><i class="fa fa-paper-plane"></i></button> 
   </div> 
  </div> 
  <style>
  /* Estilo base del bot√≥n IA con animaciones femeninas */
 #botonIA {
  position: fixed;
  bottom: 50px;
  right: 20px;
  z-index: 1000;
  width: 60px;
  height: 60px;
  background: linear-gradient(145deg, #ff69b4, #ff1493);
  color: white;
  border: none;
  font-size: 32px; /* Aumentamos el tama√±o del icono */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: all 1.5s ease-in-out;
  animation: 
    cambioColores 15s infinite alternate,
    cambioForma 30s infinite ease-in-out;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0; /* Eliminamos cualquier padding */
  overflow: hidden; /* Aseguramos que el icono no se salga */
}

/* Ajustamos el icono dentro del bot√≥n */
#botonIA i.fa-question-circle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  margin: 0; /* Eliminamos m√°rgenes */
  padding: 0; /* Eliminamos paddings */
}
  /* Formas femeninas suaves */
  @keyframes cambioForma {
    0%, 25% { 
      /* Coraz√≥n estilizado */
      clip-path: polygon(
        50% 20%,
        60% 10%,
        70% 10%,
        80% 20%,
        80% 30%,
        50% 65%,
        20% 30%,
        20% 20%,
        30% 10%,
        40% 10%
      );
    }
    30%, 55% { 
      /* Flor femenina */
      clip-path: polygon(
        50% 5%,
        60% 25%,
        80% 25%,
        65% 40%,
        75% 60%,
        50% 50%,
        25% 60%,
        35% 40%,
        20% 25%,
        40% 25%
      );
    }
    60%, 85% { 
      /* Mariposa */
      clip-path: polygon(
        50% 10%,
        60% 30%,
        80% 20%,
        70% 40%,
        85% 50%,
        70% 60%,
        80% 80%,
        60% 70%,
        50% 90%,
        40% 70%,
        20% 80%,
        30% 60%,
        15% 50%,
        30% 40%,
        20% 20%,
        40% 30%
      );
    }
    90%, 100% { 
      /* Lazo femenino */
      clip-path: polygon(
        50% 10%,
        60% 20%,
        55% 40%,
        70% 35%,
        65% 50%,
        50% 45%,
        35% 50%,
        30% 35%,
        45% 40%,
        40% 20%
      );
    }
  }

  /* Degradados femeninos sofisticados */
  @keyframes cambioColores {
    0% { background: linear-gradient(145deg, #ffb6c1, #ff69b4); box-shadow: 0 4px 20px rgba(255, 105, 180, 0.4); }
    25% { background: linear-gradient(145deg, #ffcce0, #ff8fab); box-shadow: 0 4px 20px rgba(255, 140, 171, 0.4); }
    50% { background: linear-gradient(145deg, #f8a5d8, #e373c1); box-shadow: 0 4px 20px rgba(227, 115, 193, 0.4); }
    75% { background: linear-gradient(145deg, #ffb3de, #ff80bf); box-shadow: 0 4px 20px rgba(255, 128, 191, 0.4); }
    100% { background: linear-gradient(145deg, #f9c2e5, #f28dc2); box-shadow: 0 4px 20px rgba(242, 141, 194, 0.4); }
  }

  #botonIA:hover { 
    transform: scale(1.15) rotate(5deg);
    animation-play-state: paused;
    filter: brightness(1.05);
  }

  /* Dise√±o modal tem√°tico femenino premium */
  #modalIA {
    display: none;
    position: fixed;
    bottom: 120px;
    right: 20px;
    width: 340px;
    height: 520px;
    background: #fff9fb;
    border-radius: 18px;
    box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
    z-index: 999;
    flex-direction: column;
    overflow: hidden;
    border: 1px solid #ffe6f2;
  }

  #modalHeader {
    background: linear-gradient(135deg, #ff8fab, #fb6f92);
    color: white;
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    font-size: 16px;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    letter-spacing: 0.5px;
    border-bottom: 1px solid #ffd6e7;
  }

  #cerrarModal, #abrirMenu {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.3s;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }

  #cerrarModal:hover, #abrirMenu:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
  }

  #menuConversaciones {
    display: none;
    background: #fff5f9;
    padding: 12px;
    border-bottom: 1px solid #ffebf3;
    max-height: 160px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #ffcce6 #fff5f9;
  }

  #menuConversaciones::-webkit-scrollbar {
    width: 6px;
  }

  #menuConversaciones::-webkit-scrollbar-thumb {
    background-color: #ffcce6;
    border-radius: 3px;
  }

  #menuConversaciones ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #menuConversaciones li {
    cursor: pointer;
    padding: 10px 14px;
    border-radius: 10px;
    margin-bottom: 6px;
    background: #fff;
    border: 1px solid #ffe6f2;
    font-size: 13px;
    transition: all 0.3s;
    color: #d6336c;
    font-weight: 500;
  }

  #menuConversaciones li:hover {
    background: #fff0f7;
    transform: translateX(3px);
    box-shadow: 2px 2px 8px rgba(255, 140, 171, 0.1);
  }

  #chatbox {
    flex: 1;
    padding: 18px;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.5;
    background: #fff;
    scrollbar-width: thin;
    scrollbar-color: #ffd6e7 #fff;
  }

  #chatbox::-webkit-scrollbar {
    width: 6px;
  }

  #chatbox::-webkit-scrollbar-thumb {
    background-color: #ffd6e7;
    border-radius: 3px;
  }

  #sugerenciasContainer {
    padding: 14px 18px;
    background: linear-gradient(135deg, #fff9fb, #fff5f9);
    border-top: 1px solid #ffebf3;
    display: none;
  }

  #sugerenciasContainer p {
    margin: 0 0 12px 0;
    font-size: 13px;
    color: #e84393;
    font-weight: 500;
    text-align: center;
  }

  #sugerenciasBotones {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
  }

  .sugerencia-btn {
    background: linear-gradient(145deg, #ffb3d9, #ff8fab);
    color: white;
    border: none;
    border-radius: 18px;
    padding: 8px 16px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 2px 6px rgba(255, 140, 171, 0.2);
    font-weight: 500;
    text-transform: capitalize;
    min-width: 80px;
    text-align: center;
  }

  .sugerencia-btn:hover {
    background: linear-gradient(145deg, #ff8fab, #ffb3d9);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(255, 140, 171, 0.3);
  }

  /* √Årea de entrada optimizada */
  #modalFooter {
    display: flex;
    padding: 12px 16px;
    border-top: 1px solid #ffebf3;
    background: #fff9fb;
    align-items: center;
    gap: 8px;
  }

  #userInput {
    flex: 1;
    padding: 12px 16px;
    font-size: 14px;
    border: 1px solid #ffd6e7;
    border-radius: 20px;
    min-height: 42px;
    line-height: 1.4;
    outline: none;
    transition: all 0.3s;
    background: #fff;
    color: #d6336c;
  }

  #userInput:focus {
    border-color: #ff8fab;
    box-shadow: 0 0 0 3px rgba(255, 140, 171, 0.2);
  }

  #userInput::placeholder {
    color: #ffb3d9;
    opacity: 0.7;
  }

  /* Bot√≥n enviar compacto y elegante */
  #enviarBtn {
    width: 38px;
    height: 38px;
    padding: 0;
    background: linear-gradient(145deg, #ff8fab, #fb6f92);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    flex-shrink: 0;
    box-shadow: 0 2px 6px rgba(251, 111, 146, 0.3);
  }

  #enviarBtn:hover {
    background: linear-gradient(145deg, #fb6f92, #ff8fab);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 10px rgba(251, 111, 146, 0.4);
  }

  #enviarBtn:active {
    transform: translateY(0) scale(0.98);
  }

  /* Estilos para mensajes del chat */
  #chatbox p {
    margin: 12px 0;
    padding: 14px 18px;
    border-radius: 18px;
    max-width: 85%;
    position: relative;
    transition: all 0.3s;
    font-size: 14px;
    line-height: 1.5;
  }
  
  #chatbox p strong {
    color: #e84393;
    font-weight: 600;
  }
  
  /* Mensajes del usuario */
  #chatbox p:nth-child(odd) {
    background: linear-gradient(135deg, #fff0f7, #ffe6f2);
    margin-left: auto;
    border-bottom-right-radius: 5px;
    color: #d6336c;
  }
  
  /* Mensajes de la IA */
  #chatbox p:nth-child(even) {
    background: linear-gradient(135deg, #fff9fe, #fff0fa);
    margin-right: auto;
    border-bottom-left-radius: 5px;
    color: #a83b7d;
  }

  /* Indicadores de burbuja de chat */
  #chatbox p:nth-child(odd)::after {
    content: '';
    position: absolute;
    right: -6px;
    bottom: 0;
    width: 12px;
    height: 12px;
    background: inherit;
    clip-path: polygon(0 0, 100% 0, 100% 100%);
  }

  #chatbox p:nth-child(even)::before {
    content: '';
    position: absolute;
    left: -6px;
    bottom: 0;
    width: 12px;
    height: 12px;
    background: inherit;
    clip-path: polygon(0 0, 100% 0, 0 100%);
  }
</style> 
  <script>
  // Asegurarse de que Font Awesome est√© cargado
  if (!document.head.querySelector('[href*="font-awesome"]')) {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css';
    document.head.appendChild(link);
  }

  const botonIA = document.getElementById("botonIA");
  const modalIA = document.getElementById("modalIA");
  const cerrarModal = document.getElementById("cerrarModal");
  const chatbox = document.getElementById("chatbox");
  const userInput = document.getElementById("userInput");
  const enviarBtn = document.getElementById("enviarBtn");
  const abrirMenu = document.getElementById("abrirMenu");
  const menuConversaciones = document.getElementById("menuConversaciones");
  const listaConversaciones = document.getElementById("listaConversaciones");
  const sugerenciasContainer = document.getElementById("sugerenciasContainer");
  const sugerenciasBotones = document.getElementById("sugerenciasBotones");

  let mensajesActuales = [];
  let nombreActual = "Conversaci√≥n " + new Date().toLocaleString();

  // Base de conocimiento de salud
  const conocimientoSalud = {
    "dieta": [
      "Una dieta equilibrada debe incluir frutas, verduras, prote√≠nas y carbohidratos complejos.",
      "Reduce el consumo de alimentos procesados y az√∫cares refinados.",
      "La dieta mediterr√°nea es una excelente opci√≥n para la salud cardiovascular."
    ],
    "ejercicio": [
      "Se recomienda al menos 150 minutos de ejercicio moderado por semana.",
      "Combina cardio con entrenamiento de fuerza para mejores resultados.",
      "Caminar 30 minutos al d√≠a puede mejorar significativamente tu salud."
    ],
    "sue√±o": [
      "Los adultos necesitan entre 7-9 horas de sue√±o por noche.",
      "Mant√©n un horario regular de sue√±o, incluso los fines de semana.",
      "Evita pantallas al menos 1 hora antes de dormir para mejorar la calidad del sue√±o."
    ],
    "estr√©s": [
      "La meditaci√≥n y respiraci√≥n profunda pueden reducir el estr√©s.",
      "El ejercicio regular es excelente para manejar el estr√©s.",
      "Organiza tu tiempo y prioriza tareas para reducir el estr√©s."
    ],
    "hidrataci√≥n": [
      "Debes beber al menos 2 litros de agua al d√≠a.",
      "La orina clara es un buen indicador de hidrataci√≥n adecuada.",
      "No esperes a tener sed para beber agua."
    ]
  };

  // Temas de sugerencias
  const temasSugeridos = ["dieta", "ejercicio", "sue√±o", "estr√©s", "hidrataci√≥n"];

  // Mostrar sugerencias
  function mostrarSugerencias() {
    sugerenciasBotones.innerHTML = "";
    temasSugeridos.forEach(tema => {
      const btn = document.createElement("button");
      btn.className = "sugerencia-btn";
      btn.textContent = tema;
      btn.onclick = () => {
        userInput.value = `¬øQu√© me recomiendas sobre ${tema}?`;
        enviarBtn.click();
      };
      sugerenciasBotones.appendChild(btn);
    });
    sugerenciasContainer.style.display = "block";
  }

  // Funci√≥n para guardar la conversaci√≥n actual
  function guardarConversacion(nombre, mensajes) {
    if (!mensajes || mensajes.length === 0) return;
    localStorage.setItem(`conversacion_${nombre}`, JSON.stringify(mensajes));
  }

  // Funci√≥n para cargar todas las conversaciones guardadas
  function cargarConversaciones() {
    listaConversaciones.innerHTML = "";
    let conversaciones = [];
    
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (key.startsWith("conversacion_")) {
        try {
          const datos = JSON.parse(localStorage.getItem(key));
          if (Array.isArray(datos)) {
            const nombre = key.replace("conversacion_", "");
            conversaciones.push({ nombre, datos });
          }
        } catch (e) {
          console.error("Error al parsear conversaci√≥n:", e);
        }
      }
    }
    
    conversaciones.sort((a, b) => {
      return new Date(b.nombre.replace("Conversaci√≥n ", "")) - 
             new Date(a.nombre.replace("Conversaci√≥n ", ""));
    });
    
    conversaciones.forEach(conv => {
      const li = document.createElement("li");
      li.textContent = conv.nombre;
      li.onclick = () => {
        mensajesActuales = conv.datos;
        nombreActual = conv.nombre;
        mostrarConversacion(conv.datos);
        menuConversaciones.style.display = "none";
      };
      listaConversaciones.appendChild(li);
    });
  }

  // Funci√≥n para mostrar los mensajes en el chat
  function mostrarConversacion(mensajes) {
    chatbox.innerHTML = "";
    mensajes.forEach(m => {
      const p = document.createElement("p");
      p.innerHTML = `<strong>${m.rol}:</strong> ${m.texto}`;
      chatbox.appendChild(p);
    });
    chatbox.scrollTop = chatbox.scrollHeight;
    
    // Mostrar sugerencias si es el primer mensaje
    if (mensajes.length === 0) {
      mostrarSugerencias();
    } else {
      sugerenciasContainer.style.display = "none";
    }
  }

  // Funci√≥n para obtener respuesta de la IA
  async function obtenerRespuestaIA(mensaje) {
    // Convertir mensaje a min√∫sculas para facilitar la comparaci√≥n
    const mensajeLower = mensaje.toLowerCase();
    
    // Buscar temas conocidos en el mensaje
    let temaEncontrado = null;
    for (const tema in conocimientoSalud) {
      if (mensajeLower.includes(tema)) {
        temaEncontrado = tema;
        break;
      }
    }
    
    // Si encontramos un tema conocido, devolver una respuesta espec√≠fica
    if (temaEncontrado) {
      const respuestas = conocimientoSalud[temaEncontrado];
      return respuestas[Math.floor(Math.random() * respuestas.length)];
    }
    
    // Si no es un tema conocido, generar una respuesta m√°s general
    await new Promise(resolve => setTimeout(resolve, 800));
    
    const respuestasGenerales = [
      "Esa es una buena pregunta. ¬øTe interesa saber sobre dieta, ejercicio o sue√±o?",
      "Puedo ayudarte con consejos sobre salud. ¬øQu√© √°rea te interesa m√°s?",
      "Para una respuesta m√°s espec√≠fica, ¬øpodr√≠as indicarme si es sobre alimentaci√≥n, actividad f√≠sica o descanso?",
      "La salud es un tema amplio. ¬øQuieres que me centre en alg√∫n aspecto en particular?",
      "¬øTe gustar√≠a que te d√© recomendaciones sobre alg√∫n tema de salud espec√≠fico?"
    ];
    
    // Mostrar sugerencias para la pr√≥xima respuesta
    mostrarSugerencias();
    
    return respuestasGenerales[Math.floor(Math.random() * respuestasGenerales.length)];
  }

  // Evento para enviar mensaje
  enviarBtn.onclick = async () => {
    const texto = userInput.value.trim();
    if (!texto) return;
    
    // Agregar mensaje del usuario
    mensajesActuales.push({ rol: "T√∫", texto });
    mostrarConversacion(mensajesActuales);
    userInput.value = "";
    sugerenciasContainer.style.display = "none";
    
    // Obtener y mostrar respuesta de la IA
    const respuesta = await obtenerRespuestaIA(texto);
    mensajesActuales.push({ rol: "Asistente", texto: respuesta });
    mostrarConversacion(mensajesActuales);
    
    // Guardar la conversaci√≥n
    guardarConversacion(nombreActual, mensajesActuales);
    cargarConversaciones();
  };

  // Permitir enviar mensaje con Enter
  userInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      enviarBtn.click();
    }
  });

  // Mostrar/ocultar modal
  botonIA.onclick = () => {
    if (modalIA.style.display === "flex") {
      modalIA.style.display = "none";
    } else {
      modalIA.style.display = "flex";
      cargarConversaciones();
      mostrarConversacion(mensajesActuales);
    }
  };

  // Cerrar modal
  cerrarModal.onclick = () => {
    modalIA.style.display = "none";
    if (mensajesActuales.length > 0) {
      guardarConversacion(nombreActual, mensajesActuales);
    }
    nombreActual = "Conversaci√≥n " + new Date().toLocaleString();
    mensajesActuales = [];
  };

  // Mostrar/ocultar men√∫ de conversaciones
  abrirMenu.onclick = (e) => {
    e.stopPropagation();
    menuConversaciones.style.display = menuConversaciones.style.display === "block" ? "none" : "block";
  };

  // Cerrar men√∫ al hacer clic fuera
  document.addEventListener("click", (e) => {
    if (!menuConversaciones.contains(e.target) && e.target !== abrirMenu) {
      menuConversaciones.style.display = "none";
    }
  });

  // Mostrar sugerencias al iniciar
  mostrarSugerencias();
</script> 
  <script>
/// Funci√≥n del creador para mostrar Agradecimientos (estilo profesional)
function mostrarAgradecimientos() {
  const modal = document.createElement('div');
  modal.style.position = 'fixed';
  modal.style.top = '50%';
  modal.style.left = '50%';
  modal.style.transform = 'translate(-50%, -50%)';
  modal.style.backgroundColor = '#ffffff';
  modal.style.padding = '40px';
  modal.style.borderRadius = '8px';
  modal.style.boxShadow = '0 8px 16px rgba(0,0,0,0.2)';
  modal.style.zIndex = '10000';
  modal.style.textAlign = 'center';
  modal.style.fontFamily = 'sans-serif';
  modal.innerHTML = `
    <h2 style="color: #333; margin-bottom: 20px;">Agradecimientos</h2>
    <p style="color: #555; line-height: 1.6;">
      A todas las mujeres que inspiran este proyecto, por su fuerza y visi√≥n.<br>
      A los profesionales de la salud que generosamente comparten su valioso conocimiento.<br>
      A la comunidad de desarrolladores, cuyo esp√≠ritu de colaboraci√≥n enriquece este trabajo.
    </p>
    <p style="color: #777; margin-top: 25px;"><strong>- Andres Alvarez</strong></p>
    <button id="cerrarModal" style="margin-top: 30px; padding: 12px 25px; background-color: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; transition: background-color 0.3s ease;">Cerrar</button>
  `;
  document.body.appendChild(modal);

  const cerrarModalBtn = document.getElementById('cerrarModal');
  cerrarModalBtn.addEventListener('click', () => {
    modal.remove();
  });

  // Estilo adicional para el bot√≥n al pasar el rat√≥n
  cerrarModalBtn.addEventListener('mouseover', () => {
    cerrarModalBtn.style.backgroundColor = '#0056b3';
  });

  cerrarModalBtn.addEventListener('mouseout', () => {
    cerrarModalBtn.style.backgroundColor = '#007bff';
  });
}
// Funci√≥n para exportar datos como PDF (filtrando claves espec√≠ficas de la plataforma Mujer Saludable)
function exportarDatos() {
  const clavesAIncluir = [
    "nombre",
    "apellidos",
    "fechaNacimiento",
    "correo",
    "grupoSanguineo",
    "alergias",
    "condicionesMedicas",
    "medicamentosHabituales",
    "contactoEmergenciaNombre",
    "contactoEmergenciaTelefono",
    "contactoEmergencia2",
    "hospitalParto",
    "medicoParto",
    "telefonoEmergencia",
    "peso",
    "altura",
    "presionSistolica",
    "presionDiastolica",
    "ritmoCardiaco",
    "notasSalud",
    "fechaNotas",
    "registrosDiarioSalud",
    "nombreMedicamento",
    "dosisMedicamento",
    "frecuenciaMedicamento",
    "recordatorioMedicamento",
    "registrosMedicamentos",
    "fechaEventoMedico",
    "tipoEventoMedico",
    "notasEventoMedico",
    "registrosEventosMedicos",
    "cicloFecha",
    "duracionCiclo",
    "duracionPeriodo",
    "registrosSintomas",
    "fechaUltimoPeriodo",
    "fechaProbableParto",
    "registrosPesoEmbarazo",
    "intensidadMovimientos",
    "duracionMovimientos",
    "registrosMovimientos",
    "duracionContracciones",
    "frecuenciaContracciones",
    "registrosContracciones",
    "estadoAnimo",
    "fechaEstadoAnimo",
    "recordatorios",
    "avatarUrl",
    "configNotificaciones",
    "configModoOscuro",
    "configRecordatoriosCiclo",
    "configUnidades",
    "configIdioma",
    "registrosMetricas"
    // A√±ade aqu√≠ cualquier otra clave espec√≠fica que necesites
  ];

  const datosParaExportar = {};
  let hayDatosParaExportar = false;
  let htmlTabla = '<table style="width:100%; border-collapse: collapse; font-family: sans-serif;"><thead><tr style="background-color:#f8f8f8;"><th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Clave</th><th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Valor</th></tr></thead><tbody>';

  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (clavesAIncluir.includes(key)) {
      const value = localStorage.getItem(key);
      datosParaExportar[key] = value;
      htmlTabla += `<tr style="border-bottom: 1px solid #ddd;">
                      <td style="border-right: 1px solid #ddd; padding: 12px;">${key}</td>
                      <td style="padding: 12px;">${value}</td>
                    </tr>`;
      hayDatosParaExportar = true;
    }
  }
  htmlTabla += '</tbody></table>';

  if (!hayDatosParaExportar) {
    mostrarMensaje('No se encontraron datos de la plataforma para exportar.');
    return;
  }

  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = htmlTabla; // Usar innerHTML para renderizar la tabla HTML
  document.body.appendChild(tempDiv);

  // Aseg√∫rate de que html2pdf est√© cargado antes de usarlo
  if (typeof html2pdf === 'undefined') {
    console.error('html2pdf.js no est√° cargado. Aseg√∫rate de importar la librer√≠a.');
    return;
  }

  html2pdf().from(tempDiv).set({
    margin: 1,
    filename: 'datos_mujer_saludable.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
  }).save().then(() => {
    tempDiv.remove();
    mostrarMensaje('Datos de Mujer Saludable exportados como tabla en PDF');
  }).catch((error) => {
    console.error('Error al generar el PDF:', error);
    mostrarMensaje('Hubo un problema al exportar los datos de Mujer Saludable.');
  });
}


// Funci√≥n para importar datos desde JSON pegado en prompt
function importarDatos() {
  const datosImportados = prompt("Pega aqu√≠ el JSON con los datos a importar:");
  if (datosImportados) {
    try {
      const datos = JSON.parse(datosImportados);
      for (const clave in datos) {
        localStorage.setItem(clave, datos[clave]);
      }
      cargarDatosUsuario?.();
      actualizarResumen?.();
      cargarRecordatorios?.();
      mostrarMensaje('Datos JSON importados correctamente');
    } catch (error) {
      mostrarMensaje('Error al importar. Aseg√∫rate de que el formato sea JSON v√°lido.');
    }
  }
}

// Funci√≥n para mostrar mensajes bonitos (tipo toast)
function mostrarMensaje(mensaje) {
  const toast = document.createElement('div');
  toast.textContent = mensaje;
  toast.style.position = 'fixed';
  toast.style.bottom = '30px';
  toast.style.right = '30px';
  toast.style.backgroundColor = '#28a745';
  toast.style.color = '#fff';
  toast.style.padding = '15px 25px';
  toast.style.borderRadius = '8px';
  toast.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
  toast.style.opacity = '0';
  toast.style.transition = 'opacity 0.5s ease, transform 0.3s ease-out';
  toast.style.transform = 'translateY(20px)';
  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.opacity = '1';
    toast.style.transform = 'translateY(0)';
  }, 100);

  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translateY(20px)';
    setTimeout(() => { toast.remove(); }, 500);
  }, 3000);
}
// No exporta lo que deber√≠a


</script> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> 
  <script>
    // Frases del d√≠a
    const frases = [
      "Tu bienestar es tu mayor riqueza.",
      "El autocuidado es un acto de amor propio.",
      "Respira profundo. Eres m√°s fuerte de lo que crees.",
      "Escucha a tu cuerpo, √©l sabe lo que necesitas.",
      "Cada d√≠a es una oportunidad para cuidarte mejor.",
      "Tu salud emocional es tan importante como la f√≠sica.",
      "Lo que haces hoy por tu cuerpo, √©l lo recordar√° ma√±ana.",
      "Peque√±os cambios, grandes resultados.",
      "La mejor medicina para tu cuerpo es amarlo tal como es.",
      "Cuida tu cuerpo, es el √∫nico lugar que tienes para vivir."
    ];

    // Consejos de salud
    const consejosSalud = [
      "Bebe al menos 2 litros de agua al d√≠a",
      "Realiza 30 minutos de ejercicio diario",
      "Duerme al menos 7-8 horas cada noche",
      "Reduce el consumo de az√∫cares refinados",
      "Practica t√©cnicas de relajaci√≥n diariamente",
      "Incluye frutas y verduras en cada comida",
      "Realiza chequeos m√©dicos peri√≥dicos",
      "Mant√©n una postura correcta al sentarte",
      "Protege tu piel del sol diariamente",
      "Dedica tiempo a actividades que te gusten"
    ];

    // Obtener fecha actual
    const hoy = new Date();
    const fechaHoy = hoy.toISOString().split('T')[0];

    // Contador de clicks para easter egg
    let contadorClicks = 0;

    // Inicializaci√≥n
    $(document).ready(function() {
      // Cargar datos del usuario
      cargarDatosUsuario();
      
      // Mostrar frase aleatoria del d√≠a
      const fraseAleatoria = frases[Math.floor(Math.random() * frases.length)];
      $('#fraseDelDia').text(fraseAleatoria);
      
      // Mostrar consejo de salud
      cargarConsejosSalud();
      
      // Actualizar fecha en los campos
      $('#fechaNotas').val(fechaHoy);
      $('#fechaPesoEmbarazo').val(fechaHoy);
      $('#fechaEventoMedico').val(fechaHoy);
      
      // Actualizar resumen
      actualizarResumen();
      
      // Configurar navegaci√≥n
      configurarNavegacion();
      
      // Configurar tabs
      configurarTabs();
      
      // Configurar estado de √°nimo
      configurarEstadoAnimo();
      
      // Configurar s√≠ntomas
      configurarSintomas();
      
      // Cargar recordatorios
      cargarRecordatorios();
      
      // Comprobar modo oscuro
      comprobarModoOscuro();
      
      // Configurar carga de foto de perfil
      configurarFotoPerfil();
      
      // Cargar widget de clima
      cargarClima();
      
      // Configurar Easter Egg
      $('#cabecera h1').click(function() {
        contadorClicks++;
        if(contadorClicks === 5) {
          mostrarMensaje('¬°Gracias por usar Mujer Saludable! - Andres Alvarez');
          contadorClicks = 0;
        }
      });
      
      // Configurar atajo de teclado para modo creador
      $(document).keydown(function(e) {
        if(e.ctrlKey && e.key === 'm') {
          $('body').toggleClass('modo-creador');
          mostrarMensaje('Modo creador ' + ($('body').hasClass('modo-creador') ? 'activado' : 'desactivado'));
        }
      });
    });

    // Navegaci√≥n
    function configurarNavegacion() {
      $('.nav-btn').click(function () {
        var target = $(this).data('target');
        $('.seccion').removeClass('activa');
        $('#' + target).addClass('activa');
        $('.nav-btn').removeClass('activo');
        $(this).addClass('activo');
      });
    }

    // Configurar tabs
    function configurarTabs() {
      $('.tab').click(function() {
        const tabId = $(this).data('tab');
        $(this).siblings().removeClass('activo');
        $(this).addClass('activo');
        $(this).parent().siblings('.tab-content').removeClass('activo');
        $(`#tab-${tabId}`).addClass('activo');
      });
    }

    // Estado de √°nimo
    function configurarEstadoAnimo() {
      $('.estado-btn').click(function() {
        $('.estado-btn').removeClass('seleccionado');
        $(this).addClass('seleccionado');
      });
      
      $('#guardarAnimo').click(function() {
        const estadoSeleccionado = $('.estado-btn.seleccionado').data('valor');
        if (estadoSeleccionado) {
          localStorage.setItem('estadoAnimo', estadoSeleccionado);
          localStorage.setItem('fechaEstadoAnimo', fechaHoy);
          mostrarMensaje('Estado guardado');
          actualizarResumen();
        } else {
          mostrarMensaje('Selecciona c√≥mo te sientes');
        }
      });
    }

    // S√≠ntomas
    function configurarSintomas() {
      $('.sintoma-tag').click(function() {
        $(this).toggleClass('activo');
      });
    }

    // Mostrar mensaje flotante
    function mostrarMensaje(texto) {
      $('#mensaje-flotante').text(texto).fadeIn();
      setTimeout(function() {
        $('#mensaje-flotante').fadeOut();
      }, 2000);
    }

    // Cargar datos del usuario
    function cargarDatosUsuario() {
      const nombre = localStorage.getItem('nombre') || '';
      if (nombre) {
        $('#nombre').val(nombre);
        $('#headerNombre').text(nombre);
        $('#saludoUsuaria').html(`<p>Hola, <strong>${nombre}</strong>. ¬øC√≥mo est√°s hoy?</p>`);
      } else {
     $('#saludoUsuaria').html('<p>Completa tu perfil para personalizar la app</p>');      }             


      // Cargar resto de datos del perfil
      $('#apellidos').val(localStorage.getItem('apellidos') || '');
      $('#fechaNacimiento').val(localStorage.getItem('fechaNacimiento') || '');
      $('#correo').val(localStorage.getItem('correo') || '');
      $('#grupoSanguineo').val(localStorage.getItem('grupoSanguineo') || '');
      $('#alergias').val(localStorage.getItem('alergias') || '');
      $('#condicionesMedicas').val(localStorage.getItem('condicionesMedicas') || '');
      $('#medicamentosHabituales').val(localStorage.getItem('medicamentosHabituales') || '');
      $('#contactoEmergenciaNombre').val(localStorage.getItem('contactoEmergenciaNombre') || '');
      $('#contactoEmergenciaTelefono').val(localStorage.getItem('contactoEmergenciaTelefono') || '');
      $('#contactoEmergencia2').val(localStorage.getItem('contactoEmergencia2') || '');
      $('#hospitalParto').val(localStorage.getItem('hospitalParto') || '');
      $('#medicoParto').val(localStorage.getItem('medicoParto') || '');
      $('#telefonoEmergencia').val(localStorage.getItem('telefonoEmergencia') || '');
      
      // Cargar configuraciones
      $('#configNotificaciones').prop('checked', localStorage.getItem('configNotificaciones') !== 'false');
      $('#configModoOscuro').prop('checked', localStorage.getItem('configModoOscuro') === 'true');
      $('#configRecordatoriosCiclo').prop('checked', localStorage.getItem('configRecordatoriosCiclo') !== 'false');
      $('#configUnidades').val(localStorage.getItem('configUnidades') || 'metrico');
      $('#configIdioma').val(localStorage.getItem('configIdioma') || 'es');
      
      // Cargar datos de salud
      $('#peso').val(localStorage.getItem('peso') || '');
      $('#altura').val(localStorage.getItem('altura') || '');
      $('#presionSistolica').val(localStorage.getItem('presionSistolica') || '');
      $('#presionDiastolica').val(localStorage.getItem('presionDiastolica') || '');
      $('#ritmoCardiaco').val(localStorage.getItem('ritmoCardiaco') || '');
      $('#notasSalud').val(localStorage.getItem('notasSalud') || '');
      
      // Cargar datos de ciclo
      $('#fechaCiclo').val(localStorage.getItem('cicloFecha') || '');
      $('#duracionCiclo').val(localStorage.getItem('duracionCiclo') || '28');
      $('#duracionPeriodo').val(localStorage.getItem('duracionPeriodo') || '5');
      
      // Cargar datos de embarazo
      $('#fechaUltimoPeriodo').val(localStorage.getItem('fechaUltimoPeriodo') || '');
      $('#fechaProbableParto').val(localStorage.getItem('fechaProbableParto') || '');
      
      // Cargar avatar
      const avatarUrl = localStorage.getItem('avatarUrl');
      if (avatarUrl) {
        $('#avatarContainer').html(`<img src="${avatarUrl}" alt="Avatar">`);
      }
    }

    // Actualizar resumen
    function actualizarResumen() {
      // Ciclo
      const fechaCiclo = localStorage.getItem('cicloFecha');
      if (fechaCiclo) {
        const fechaUltimoObj = new Date(fechaCiclo);
        const hoy = new Date();
        const diffTime = Math.abs(hoy - fechaUltimoObj);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        $('#resumeCiclo').text(`D√≠a ${diffDays}`);
      }
      
      // Estado
      const estado = localStorage.getItem('estadoAnimo');
      if (estado) {
        const emojis = ['', 'üòû', 'üòê', 'üôÇ', 'üòä', 'üòÉ'];
        $('#resumeEstado').text(emojis[estado]);
      }
      
      // Peso e IMC
      const peso = localStorage.getItem('peso');
      const altura = localStorage.getItem('altura');
      if (peso) $('#resumePeso').text(`${peso} kg`);
      if (peso && altura) {
        const alturaM = altura / 100;
        const imc = (peso / (alturaM * alturaM)).toFixed(1);
        $('#resumeIMC').text(imc);
      }
    }

    // Guardar ciclo menstrual
    function guardarCiclo() {
      const fecha = document.getElementById('fechaCiclo').value;
      const duracionCiclo = document.getElementById('duracionCiclo').value;
      const duracionPeriodo = document.getElementById('duracionPeriodo').value;
      
      if (!fecha) {
        mostrarMensaje('Selecciona una fecha');
        return;
      }
      
      localStorage.setItem('cicloFecha', fecha);
      localStorage.setItem('duracionCiclo', duracionCiclo);
      localStorage.setItem('duracionPeriodo', duracionPeriodo);
      
      mostrarMensaje('Ciclo guardado');
      dibujarGraficoCiclo();
      calcularProximosPeriodos();
      actualizarResumen();
    }

    function dibujarGraficoCiclo() {
      const fecha = localStorage.getItem('cicloFecha');
      const duracionCiclo = parseInt(localStorage.getItem('duracionCiclo') || '28');
      const duracionPeriodo = parseInt(localStorage.getItem('duracionPeriodo') || '5');
      
      const ctx = document.getElementById('graficoCiclo').getContext('2d');
      ctx.clearRect(0, 0, 600, 180);
      
      if (fecha) {
        const fechaInicio = new Date(fecha);
        const hoy = new Date();
        const diffTime = hoy - fechaInicio;
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        const diaActual = diffDays % duracionCiclo;
        
        // Dibujar l√≠nea de tiempo
        ctx.fillStyle = "#f0f0f0";
        ctx.fillRect(20, 40, 260, 30);
        
        // Dibujar fases
        const anchoFase1 = (duracionPeriodo / duracionCiclo) * 260;
        const anchoFase2 = ((14 - duracionPeriodo) / duracionCiclo) * 260;
        const anchoFase3 = (2 / duracionCiclo) * 260;
        const anchoFase4 = ((duracionCiclo - 16) / duracionCiclo) * 260;
        
        ctx.fillStyle = "#f8bbd0"; // Menstruaci√≥n
        ctx.fillRect(20, 40, anchoFase1, 30);
        
        ctx.fillStyle = "#e1bee7"; // Folicular
        ctx.fillRect(20 + anchoFase1, 40, anchoFase2, 30);
        
        ctx.fillStyle = "#bbdefb"; // Ovulaci√≥n
        ctx.fillRect(20 + anchoFase1 + anchoFase2, 40, anchoFase3, 30);
        
        ctx.fillStyle = "#c8e6c9"; // L√∫tea
        ctx.fillRect(20 + anchoFase1 + anchoFase2 + anchoFase3, 40, anchoFase4, 30);
        
        // Dibujar d√≠a actual
        const posicionActual = 20 + ((diaActual / duracionCiclo) * 260);
        ctx.fillStyle = "#e91e63";
        ctx.beginPath();
        ctx.arc(posicionActual, 55, 10, 0, Math.PI * 2);
        ctx.fill();
        
        // Dibujar textos
        ctx.fillStyle = "#333";
        ctx.font = "12px Arial";
        ctx.fillText(`D√≠a ${diaActual} de ${duracionCiclo}`, 20, 100);
        
        let faseActual = "";
        if (diaActual <= duracionPeriodo) {
          faseActual = "Menstruaci√≥n";
        } else if (diaActual <= 14) {
          faseActual = "Fase Folicular";
        } else if (diaActual <= 16) {
          faseActual = "Ovulaci√≥n";
        } else {
          faseActual = "Fase L√∫tea";
        }
        
        ctx.fillText(`Fase actual: ${faseActual}`, 20, 120);
        ctx.fillText(`√öltimo periodo: ${formatearFecha(fecha)}`, 20, 140);
      }
    }

    function calcularProximosPeriodos() {
      const fecha = localStorage.getItem('cicloFecha');
      const duracionCiclo = parseInt(localStorage.getItem('duracionCiclo') || '28');
      
      if (fecha) {
        const fechaInicio = new Date(fecha);
        let html = '<h4>Pr√≥ximos periodos:</h4><ul>';
        
        for (let i = 1; i <= 3; i++) {
          const proxFecha = new Date(fechaInicio);
          proxFecha.setDate(proxFecha.getDate() + (duracionCiclo * i));
          html += `<li>${formatearFecha(proxFecha.toISOString().split('T')[0])}</li>`;
        }
        
        html += '</ul>';
        $('#proximosPeriodos').html(html);
      }
    }

    // Guardar s√≠ntomas del ciclo
    function guardarSintomasCiclo() {
      const sintomasActivos = [];
      $('.sintoma-tag.activo').each(function() {
        sintomasActivos.push($(this).data('sintoma'));
      });
      
      const notas = $('#notasCiclo').val();
      
      const registro = {
        fecha: fechaHoy,
        sintomas: sintomasActivos,
        notas: notas
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosSintomas') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosSintomas', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('S√≠ntomas guardados');
      $('#notasCiclo').val('');
      $('.sintoma-tag').removeClass('activo');
    }

    // Calcular fertilidad
    function calcularFertilidad() {
      const fecha = $('#fertilidadFecha').val();
      const duracionCiclo = parseInt($('#fertilidadDuracion').val() || '28');
      
      if (!fecha) {
        mostrarMensaje('Selecciona una fecha');
        return;
      }
      
      const fechaInicio = new Date(fecha);
      const diaOvulacion = duracionCiclo - 14;
      const inicioFertil = new Date(fechaInicio);
      inicioFertil.setDate(inicioFertil.getDate() + (diaOvulacion - 5));
      const finFertil = new Date(fechaInicio);
      finFertil.setDate(finFertil.getDate() + (diaOvulacion + 1));
      
      let html = `<p>Tus d√≠as m√°s f√©rtiles son del <strong>${formatearFecha(inicioFertil.toISOString().split('T')[0])}</strong> al <strong>${formatearFecha(finFertil.toISOString().split('T')[0])}</strong></p>`;
      html += `<p>La ovulaci√≥n probablemente ocurra alrededor del <strong>${formatearFecha(new Date(fechaInicio.setDate(fechaInicio.getDate() + diaOvulacion))) }</strong></p>`;
      
      $('#resultadoFertilidad').html(html);
    }

    // Calcular embarazo
    function calcularEmbarazo() {
      const fechaUltimoPeriodo = $('#fechaUltimoPeriodo').val();
      const fechaProbableParto = $('#fechaProbableParto').val();
      
      if (!fechaUltimoPeriodo) {
        mostrarMensaje('Ingresa la fecha del √∫ltimo periodo');
        return;
      }
      
      localStorage.setItem('fechaUltimoPeriodo', fechaUltimoPeriodo);
      if (fechaProbableParto) {
        localStorage.setItem('fechaProbableParto', fechaProbableParto);
      }
      
      const fechaUltimoObj = new Date(fechaUltimoPeriodo);
      let fechaParto;
      
      if (fechaProbableParto) {
        fechaParto = new Date(fechaProbableParto);
      } else {
        fechaParto = new Date(fechaUltimoObj);
        fechaParto.setDate(fechaParto.getDate() + 280); // 40 semanas
      }
      
      const hoy = new Date();
      const diffTime = hoy - fechaUltimoObj;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      const semanas = Math.floor(diffDays / 7);
      const dias = diffDays % 7;
      
      const tiempoRestante = fechaParto - hoy;
      const diasRestantes = Math.ceil(tiempoRestante / (1000 * 60 * 60 * 24));
      const semanasRestantes = Math.floor(diasRestantes / 7);
      const diasRestantesMod = diasRestantes % 7;
      
      // Actualizar informaci√≥n
      let html = `<p>Est√°s en la semana <strong>${semanas}</strong> y <strong>${dias}</strong> d√≠as</p>`;
      html += `<p>Faltan <strong>${semanasRestantes}</strong> semanas y <strong>${diasRestantesMod}</strong> d√≠as para la fecha estimada de parto</p>`;
      $('#infoEmbarazo').html(html);
      
      // Actualizar barra de progreso
      const progreso = (semanas / 40) * 100;
      $('#progresoEmbarazo').css('width', `${progreso}%`);
      
      // Dibujar gr√°fico
      dibujarGraficoEmbarazo(semanas);
      
      mostrarMensaje('C√°lculo realizado');
    }

    function dibujarGraficoEmbarazo(semanas) {
      const ctx = document.getElementById('graficoEmbarazo').getContext('2d');
      ctx.clearRect(0, 0, 600, 180);
      
      // Dibujar l√≠nea de tiempo
      ctx.fillStyle = "#f0f0f0";
      ctx.fillRect(20, 40, 260, 30);
      
      // Dibujar trimestres
      ctx.fillStyle = "#bbdefb"; // Primer trimestre
      ctx.fillRect(20, 40, 260/3, 30);
      
      ctx.fillStyle = "#c8e6c9"; // Segundo trimestre
      ctx.fillRect(20 + 260/3, 40, 260/3, 30);
      
      ctx.fillStyle = "#ffcc80"; // Tercer trimestre
      ctx.fillRect(20 + 2*260/3, 40, 260/3, 30);
      
      // Dibujar semana actual
      const posicionActual = 20 + ((semanas / 40) * 260);
      ctx.fillStyle = "#e91e63";
      ctx.beginPath();
      ctx.arc(posicionActual, 55, 10, 0, Math.PI * 2);
      ctx.fill();
      
      // Dibujar textos
      ctx.fillStyle = "#333";
      ctx.font = "12px Arial";
      ctx.fillText(`Semana ${semanas} de 40`, 20, 100);
      
      let trimestre = semanas <= 13 ? "Primer" : semanas <= 26 ? "Segundo" : "Tercer";
      ctx.fillText(`${trimestre} trimestre`, 20, 120);
      
      // Dibujar etiquetas de trimestres
      ctx.font = "10px Arial";
      ctx.fillText("Trim. 1", 20 + 260/6 - 20, 35);
      ctx.fillText("Trim. 2", 20 + 260/2 - 20, 35);
      ctx.fillText("Trim. 3", 20 + 5*260/6 - 20, 35);
    }

    // Guardar preparaci√≥n para el parto
    function guardarPreparacionParto() {
      const hospital = $('#hospitalParto').val();
      const medico = $('#medicoParto').val();
      const telefono = $('#telefonoEmergencia').val();
      
      localStorage.setItem('hospitalParto', hospital);
      localStorage.setItem('medicoParto', medico);
      localStorage.setItem('telefonoEmergencia', telefono);
      
      mostrarMensaje('Informaci√≥n de parto guardada');
    }

    // Guardar peso de embarazo
    function guardarPesoEmbarazo() {
      const peso = $('#pesoEmbarazo').val();
      const fecha = $('#fechaPesoEmbarazo').val();
      
      if (!peso || !fecha) {
        mostrarMensaje('Completa todos los campos');
        return;
      }
      
      const registro = {
        fecha: fecha,
        peso: peso
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosPesoEmbarazo') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosPesoEmbarazo', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Peso guardado');
      $('#pesoEmbarazo').val('');
    }

    // Guardar movimientos fetales
    function guardarMovimientos() {
      const intensidad = $('#intensidadMovimientos').val();
      const duracion = $('#duracionMovimientos').val();
      
      if (!duracion) {
        mostrarMensaje('Indica la duraci√≥n');
        return;
      }
      
      const registro = {
        fecha: fechaHoy,
        hora: new Date().toTimeString().slice(0, 5),
        intensidad: intensidad,
        duracion: duracion
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosMovimientos') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosMovimientos', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Movimientos guardados');
      $('#duracionMovimientos').val('');
    }

    // Guardar contracciones
    function guardarContracciones() {
      const duracion = $('#duracionContracciones').val();
      const frecuencia = $('#frecuenciaContracciones').val();
      
      if (!duracion || !frecuencia) {
        mostrarMensaje('Completa todos los campos');
        return;
      }
      
      const registro = {
        fecha: fechaHoy,
        hora: new Date().toTimeString().slice(0, 5),
        duracion: duracion,
        frecuencia: frecuencia
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosContracciones') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosContracciones', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Contracciones guardadas');
      $('#duracionContracciones').val('');
      $('#frecuenciaContracciones').val('');
    }

    // Guardar m√©tricas de salud
    function guardarMetricas() {
      const peso = $('#peso').val();
      const altura = $('#altura').val();
      const presionSistolica = $('#presionSistolica').val();
      const presionDiastolica = $('#presionDiastolica').val();
      const ritmoCardiaco = $('#ritmoCardiaco').val();
      
      if (peso) localStorage.setItem('peso', peso);
      if (altura) localStorage.setItem('altura', altura);
      if (presionSistolica) localStorage.setItem('presionSistolica', presionSistolica);
      if (presionDiastolica) localStorage.setItem('presionDiastolica', presionDiastolica);
      if (ritmoCardiaco) localStorage.setItem('ritmoCardiaco', ritmoCardiaco);
      
      const registro = {
        fecha: fechaHoy,
        peso: peso || null,
        altura: altura || null,
        presionSistolica: presionSistolica || null,
        presionDiastolica: presionDiastolica || null,
        ritmoCardiaco: ritmoCardiaco || null
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosMetricas') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosMetricas', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('M√©tricas guardadas');
      actualizarResumen();
      dibujarGraficoSalud();
    }

    function dibujarGraficoSalud() {
      const registros = JSON.parse(localStorage.getItem('registrosMetricas') || '[]');
      
      if (registros.length > 0) {
        const ctx = document.getElementById('graficoSalud').getContext('2d');
        ctx.clearRect(0, 0, 600, 180);
        
        // Obtener √∫ltimos 5 registros
        const ultimosRegistros = registros.slice(-5);
        
        // Dibujar gr√°fico de peso
        ctx.fillStyle = "#333";
        ctx.font = "14px Arial";
        ctx.fillText("Historial de peso (kg)", 20, 20);
        
        const maxPeso = Math.max(...ultimosRegistros.filter(r => r.peso).map(r => parseFloat(r.peso))) + 10;
        const minPeso = Math.min(...ultimosRegistros.filter(r => r.peso).map(r => parseFloat(r.peso))) - 10;
        const rangoPeso = maxPeso - minPeso;
        
        // Dibujar l√≠neas de fondo
        ctx.strokeStyle = "#eee";
        ctx.beginPath();
        for (let i = 0; i <= 4; i++) {
          const y = 40 + (i * 25);
          ctx.moveTo(20, y);
          ctx.lineTo(280, y);
        }
        ctx.stroke();
        
        // Dibujar puntos y l√≠neas
        ctx.strokeStyle = "#e91e63";
        ctx.lineWidth = 2;
        ctx.beginPath();
        
        ultimosRegistros.forEach((registro, index) => {
          if (registro.peso) {
            const x = 50 + (index * 50);
            const altura = 140 - (((registro.peso - minPeso) / rangoPeso) * 100);
            
            if (index === 0) {
              ctx.moveTo(x, altura);
            } else {
              ctx.lineTo(x, altura);
            }
            
            // Dibujar fecha abreviada
            ctx.fillStyle = "#888";
            ctx.font = "10px Arial";
            const fechaCorta = registro.fecha.slice(5);
            ctx.fillText(fechaCorta, x - 10, 155);
          }
        });
        
        ctx.stroke();
        
        // Dibujar puntos
        ultimosRegistros.forEach((registro, index) => {
          if (registro.peso) {
            const x = 50 + (index * 50);
            const altura = 140 - (((registro.peso - minPeso) / rangoPeso) * 100);
            
            ctx.fillStyle = "#e91e63";
            ctx.beginPath();
            ctx.arc(x, altura, 4, 0, Math.PI * 2);
            ctx.fill();
            
            // Mostrar valor
            ctx.fillStyle = "#333";
            ctx.font = "10px Arial";
            ctx.fillText(registro.peso, x - 5, altura - 15);
          }
        });
      } else {
        $('#historySalud').show();
      }
    }

    // Guardar datos del diario de salud
    function guardarSalud() {
      const nota = $('#notasSalud').val();
      const fecha = $('#fechaNotas').val();
      
      const registro = {
        fecha: fecha,
        nota: nota
      };
      
      // Manejar foto adjunta si existe
      const fotoInput = document.getElementById('fotoDiario');
      if (fotoInput.files.length > 0) {
        const file = fotoInput.files[0];
        const reader = new FileReader();
        
        reader.onload = function(event) {
          registro.foto = event.target.result;
          guardarRegistroDiario(registro);
        };
        
        reader.readAsDataURL(file);
      } else {
        guardarRegistroDiario(registro);
      }
    }

    function guardarRegistroDiario(registro) {
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosDiarioSalud') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosDiarioSalud', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Entrada guardada en el diario');
      $('#notasSalud').val('');
      $('#fotoDiario').val('');
    }

    // Guardar evento m√©dico
    function guardarEventoMedico() {
      const fecha = $('#fechaEventoMedico').val();
      const tipo = $('#tipoEventoMedico').val();
      const notas = $('#notasEventoMedico').val();
      
      const registro = {
        fecha: fecha,
        tipo: tipo,
        notas: notas
      };
      
      // Manejar documento adjunto si existe
      const docInput = document.getElementById('documentoEventoMedico');
      if (docInput.files.length > 0) {
        const file = docInput.files[0];
        const reader = new FileReader();
        
        reader.onload = function(event) {
          registro.documento = {
            nombre: file.name,
            tipo: file.type,
            contenido: event.target.result
          };
          guardarRegistroEvento(registro);
        };
        
        reader.readAsDataURL(file);
      } else {
        guardarRegistroEvento(registro);
      }
    }

    function guardarRegistroEvento(registro) {
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosEventosMedicos') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosEventosMedicos', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Evento m√©dico guardado');
      $('#fechaEventoMedico').val(fechaHoy);
      $('#tipoEventoMedico').val('consulta');
      $('#notasEventoMedico').val('');
      $('#documentoEventoMedico').val('');
    }

    // Guardar medicamento
    function guardarMedicamento() {
      const nombre = $('#nombreMedicamento').val();
      const dosis = $('#dosisMedicamento').val();
      const frecuencia = $('#frecuenciaMedicamento').val();
      const recordatorio = $('#recordatorioMedicamento').is(':checked');
      
      if (!nombre || !dosis || !frecuencia) {
        mostrarMensaje('Completa todos los campos');
        return;
      }
      
      const registro = {
        nombre: nombre,
        dosis: dosis,
        frecuencia: frecuencia,
        recordatorio: recordatorio
      };
      
      let registrosAnteriores = JSON.parse(localStorage.getItem('registrosMedicamentos') || '[]');
      registrosAnteriores.push(registro);
      localStorage.setItem('registrosMedicamentos', JSON.stringify(registrosAnteriores));
      
      mostrarMensaje('Medicamento guardado');
      $('#nombreMedicamento').val('');
      $('#dosisMedicamento').val('');
      $('#frecuenciaMedicamento').val('1');
      $('#recordatorioMedicamento').prop('checked', false);
      
      // Crear recordatorio (opcional)
      if (recordatorio) {
        crearRecordatorio(nombre, dosis, frecuencia);
      }
    }

    // Crear recordatorio (simulado)
    function crearRecordatorio(nombre, dosis, frecuencia) {
      // En una app real, esto se har√≠a con una API de notificaciones push
      // Aqu√≠, solo simulamos el recordatorio con un setTimeout
      let mensaje = `Recordatorio: Tomar ${nombre}, ${dosis}, ${frecuencia}.`;
      let tiempo = 0;
      
      switch (frecuencia) {
        case '1': tiempo = 24 * 60 * 60 * 1000; break; // 1 d√≠a
        case '2': tiempo = 12 * 60 * 60 * 1000; break; // 12 horas
        case '3': tiempo = 8 * 60 * 60 * 1000; break; // 8 horas
        case '4': tiempo = 6 * 60 * 60 * 1000; break; // 6 horas
        case 'segun': tiempo = 60 * 60 * 1000; break; // 1 hora (simulaci√≥n)
      }
      
      setTimeout(function() {
        mostrarMensaje(mensaje);
        // En una app real, aqu√≠ se mostrar√≠a una notificaci√≥n push
      }, tiempo);
    }

    // Guardar perfil
    function guardarPerfil() {
      const nombre = $('#nombre').val();
      const apellidos = $('#apellidos').val();
      const fechaNacimiento = $('#fechaNacimiento').val();
      const correo = $('#correo').val();
      const grupoSanguineo = $('#grupoSanguineo').val();
      
      localStorage.setItem('nombre', nombre);
      localStorage.setItem('apellidos', apellidos);
      localStorage.setItem('fechaNacimiento', fechaNacimiento);
      localStorage.setItem('correo', correo);
      localStorage.setItem('grupoSanguineo', grupoSanguineo);
      
      mostrarMensaje('Perfil guardado');
      
      // Actualizar nombre en la cabecera
      $('#headerNombre').text(nombre);
      $('#saludoUsuaria').html(`<p>Hola, <strong>${nombre}</strong>. ¬øC√≥mo est√°s hoy?</p>`);
    }

    // Guardar informaci√≥n m√©dica
    function guardarInfoMedica() {
      const alergias = $('#alergias').val();
      const condicionesMedicas = $('#condicionesMedicas').val();
      const medicamentosHabituales = $('#medicamentosHabituales').val();
      const contactoEmergenciaNombre = $('#contactoEmergenciaNombre').val();
      const contactoEmergenciaTelefono = $('#contactoEmergenciaTelefono').val();
      
      localStorage.setItem('alergias', alergias);
      localStorage.setItem('condicionesMedicas', condicionesMedicas);
      localStorage.setItem('medicamentosHabituales', medicamentosHabituales);
      localStorage.setItem('contactoEmergenciaNombre', contactoEmergenciaNombre);
      localStorage.setItem('contactoEmergenciaTelefono', contactoEmergenciaTelefono);
      
      mostrarMensaje('Informaci√≥n m√©dica guardada');
    }

    // Guardar contactos de emergencia
    function guardarContactosEmergencia() {
      const contacto2 = $('#contactoEmergencia2').val();
      localStorage.setItem('contactoEmergencia2', contacto2);
      mostrarMensaje('Contactos de emergencia guardados');
    }

    // Guardar configuraci√≥n
    function guardarConfiguracion() {
      const notificaciones = $('#configNotificaciones').is(':checked');
      const modoOscuro = $('#configModoOscuro').is(':checked');
      const recordatoriosCiclo = $('#configRecordatoriosCiclo').is(':checked');
      const unidades = $('#configUnidades').val();
      const idioma = $('#configIdioma').val();
      
      localStorage.setItem('configNotificaciones', notificaciones);
      localStorage.setItem('configModoOscuro', modoOscuro);
      localStorage.setItem('configRecordatoriosCiclo', recordatoriosCiclo);
      localStorage.setItem('configUnidades', unidades);
      localStorage.setItem('configIdioma', idioma);
      
      mostrarMensaje('Configuraci√≥n guardada');
      
      // Aplicar modo oscuro
      comprobarModoOscuro();
    }
    
    function comprobarModoOscuro() {
      const modoOscuro = localStorage.getItem('configModoOscuro') === 'true';
      if (modoOscuro) {
        $('body').addClass('dark-mode');
      } else {
        $('body').removeClass('dark-mode');
      }
    }

    // Formatear fecha
    function formatearFecha(fecha) {
      const opciones = { year: 'numeric', month: 'long', day: 'numeric' };
      return new Date(fecha).toLocaleDateString('es-ES', opciones);
    }
    
    // Recordatorios
    function cargarRecordatorios() {
      let recordatorios = JSON.parse(localStorage.getItem('recordatorios') || '[]');
      let html = '';
      
      if (recordatorios.length > 0) {
        $('#recordatorios-container .no-data').hide();
        
        recordatorios.forEach((recordatorio, index) => {
          html += `<div class="recordatorio">
            <p>${recordatorio.texto}</p>
            <div class="recordatorio-acciones">
              <i class="fa fa-edit" data-index="${index}"></i>
              <i class="fa fa-trash" data-index="${index}"></i>
            </div>
          </div>`;
        });
        
        $('#recordatorios-container').html(html);
        
        // Eventos para editar y eliminar recordatorios
        $('.recordatorio-acciones .fa-edit').click(function() {
          const index = $(this).data('index');
          const recordatorio = recordatorios[index];
          
          // Aqu√≠ deber√≠as mostrar un formulario para editar el recordatorio
          const nuevoTexto = prompt("Editar recordatorio", recordatorio.texto);
          
          if (nuevoTexto) {
            recordatorios[index].texto = nuevoTexto;
            localStorage.setItem('recordatorios', JSON.stringify(recordatorios));
            cargarRecordatorios(); // Recargar la lista
            mostrarMensaje('Recordatorio editado');
          }
        });
        
        $('.recordatorio-acciones .fa-trash').click(function() {
          const index = $(this).data('index');
          recordatorios.splice(index, 1);
          localStorage.setItem('recordatorios', JSON.stringify(recordatorios));
          cargarRecordatorios(); // Recargar la lista
          mostrarMensaje('Recordatorio eliminado');
          
          if (recordatorios.length === 0) {
            $('#recordatorios-container .no-data').show();
            $('#recordatorios-container').html('');
          }
        });
      } else {
        $('#recordatorios-container .no-data').show();
        $('#recordatorios-container').html('');
      }
    }
    
    $('#nuevoRecordatorio').click(function() {
      const texto = prompt("Escribe tu recordatorio:");
      if (texto) {
        let recordatorios = JSON.parse(localStorage.getItem('recordatorios') || '[]');
        recordatorios.push({ texto: texto });
        localStorage.setItem('recordatorios', JSON.stringify(recordatorios));
        cargarRecordatorios();
        mostrarMensaje('Recordatorio agregado');
      }
    });
    
    // Foto de perfil
    function configurarFotoPerfil() {
      $('#cambiarFoto').click(function() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';
        
        input.onchange = function(e) {
          const file = e.target.files[0];
          const reader = new FileReader();
          
          reader.onload = function(event) {
            const imgUrl = event.target.result;
            localStorage.setItem('avatarUrl', imgUrl);
            $('#avatarContainer').html(`<img src="${imgUrl}" alt="Avatar">`);
            mostrarMensaje('Foto de perfil actualizada');
          }
          
          reader.readAsDataURL(file);
        };
        
        input.click();
      });
      
      $('#quitarFoto').click(function() {
        localStorage.removeItem('avatarUrl');
        $('#avatarContainer').html(`<i class="fa fa-user"></i>`);
        mostrarMensaje('Foto de perfil eliminada');
      });
    }
    
    // Cargar consejos de salud
    function cargarConsejosSalud() {
      const consejoAleatorio = consejosSalud[Math.floor(Math.random() * consejosSalud.length)];
      $('#consejoSalud').text(consejoAleatorio);
    }
    
    // Cargar widget de clima
    function cargarClima() {
      // Simulaci√≥n - en una app real usar√≠as una API como OpenWeatherMap
      const climas = [
        { temp: 22, estado: "soleado", consejo: "¬°D√≠a perfecto para caminar al aire libre!" },
        { temp: 15, estado: "nublado", consejo: "El clima fresco es ideal para ejercicio moderado" },
        { temp: 30, estado: "caluroso", consejo: "Evita salir en horas de m√°ximo calor y mantente hidratada" }
      ];
      
      const climaAleatorio = climas[Math.floor(Math.random() * climas.length)];
      
      $('#widgetClima').html(`
        <div class="clima-temp">${climaAleatorio.temp}¬∞C</div>
        <div class="clima-estado">${climaAleatorio.estado}</div>
      `);
      
      $('#climaConsejo').text(climaAleatorio.consejo);
    }
    
    // Funciones de comunidad
    function mostrarForo() {
      mostrarMensaje('Foro de discusi√≥n (simulado)');
    }
    
    function mostrarFormularioPregunta() {
      const pregunta = prompt("Escribe tu pregunta para el especialista:");
      if (pregunta) {
        mostrarMensaje('Pregunta enviada al especialista');
      }
    }
    
    function mostrarHistorias() {
      mostrarMensaje('Historias inspiradoras (simulado)');
    }
    
    function sugerirEvento() {
      const evento = prompt("Sugiere un evento para la comunidad:");
      if (evento) {
        mostrarMensaje('Evento sugerido, ¬°gracias!');
      }
    }
    
    // Funciones de recursos
    function explorarRecursos() {
      mostrarMensaje('Explorar recursos (simulado)');
    }
    
    // Funciones de emergencia
    function llamarEmergencia() {
      if (confirm('¬øEst√°s segura que deseas llamar a emergencias?')) {
        mostrarMensaje('Llamando a emergencias...');
        // En una app real, aqu√≠ se har√≠a la llamada
      }
    }
    
    
    // Resetear datos
    function resetDatos() {
      if (confirm('¬øEst√°s seguro de que quieres eliminar todos tus datos? Esta acci√≥n no se puede deshacer.')) {
        localStorage.clear();
        mostrarMensaje('Todos los datos han sido eliminados');
        
        // Recargar la p√°gina para limpiar la UI
        location.reload();
      }
    }
  </script> 
 </body>
</html>
